<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>BingBlog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="BingBlog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="BingBlog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="BingBlog">
  
    <link rel="alternative" href="/atom.xml" title="BingBlog" type="application/atom+xml">
  
  
  <script src="/style.js"></script>
  

  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-117958143-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-117958143-1');
</script>
</head>

<body>
  <div id="container">
    <div class="left-col">
      <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img src="/avatar.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Bing</a></h1>
		</hgroup>

		
		<p class="header-subtitle">Bing&#39;s coding and life!</p>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
				<li><a href="/tags/SurviveJs">SurviveJsWebpack中文翻译文档</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
	        
    		
    			
    			<a class="js-smart-menu" data-idx="0" href="javascript:void(0)">所有文章</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="1" href="javascript:void(0)">标签</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="2" href="javascript:void(0)">源码库</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="3" href="javascript:void(0)">关于我</a>
    			
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/BingBlog" title="github">github</a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"><i class="icon-list"></i></div>
  		<h1 class="header-author js-mobile-header hide">Bing</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				
					<img src="/avatar.jpg" class="js-avatar">
				
			</div>
			<hgroup>
			  <h1 class="header-author">Bing</h1>
			</hgroup>
			
			<p class="header-subtitle">Bing&#39;s coding and life!</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/tags/SurviveJs">SurviveJsWebpack中文翻译文档</a></li>
		        
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/BingBlog" title="github">github</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
        
  
    <article id="post-webFont汇总" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/10/24/webFont汇总/">webFont汇总</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="主流font格式简介"><a href="#主流font格式简介" class="headerlink" title="主流font格式简介"></a>主流font格式简介</h1><h2 id="网页开放字体格式-WOFF"><a href="#网页开放字体格式-WOFF" class="headerlink" title="网页开放字体格式(WOFF)"></a>网页开放字体格式(WOFF)</h2><p>以下是使用 WOFF 的三个好处：</p>
<p>特性    Chrome    Firefox (Gecko)    Internet Explorer    Opera    Safari<br>兼容版本    6.0    3.5 (1.9.1)    9.0    11.10    5.1<br>WOFF2    36    39 (39)[1]    未实现    24    未实现</p>
<p>字体采用压缩格式，相对于使用不压缩的 TrueType, OpenType 的网站，将占用更少的带宽，获得更快的加载速度。<br>许多字体经销商并不愿意将 TrueType 或 OpenType 的许可证颁发给网站，他们更愿意颁发 WOFF 的许可证。这对于网站开发者来说将是一个福音。<br>无论是收费还是免费的浏览器厂家都喜欢 WOFF 格式，因此它很可能成为未来的主流与跨平台字体格式。</p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/10/24/webFont汇总/" class="archive-article-date">
  	<time datetime="2017-10-24T14:41:00.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-10-24</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webFont/">webFont</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/学习/">学习</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>












  
    <article id="post-JavaScript进行数据验证" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/10/20/JavaScript进行数据验证/">JavaScript进行数据验证</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="需求场景"><a href="#需求场景" class="headerlink" title="需求场景"></a>需求场景</h1><p>随着前端应用的复杂度越来越高，逻辑也变得越来越重，对数据的处理和校验也变得越来重要。在前端开发中，如何使用JavaScript进行高效、灵活的数据校验？本文将自己的事件分享出来。</p>
<h2 id="一个复杂的需求"><a href="#一个复杂的需求" class="headerlink" title="一个复杂的需求"></a>一个复杂的需求</h2><p>如下使我们要提交的数据，结构虽然不是很复杂，但是需要满足一下条件：</p>
<ol>
<li><p>baseTable: 基准表必选</p>
</li>
<li><p>tableConf: 如选择使用时间(isShowTime)，则时间字段(timeField)必选</p>
</li>
<li><p>field</p>
<ol>
<li>显示名称必填，字数不能超过六个</li>
<li>排序必填，切为数值型字符</li>
<li>map要符合a::b,c::d的格式，正则为<br>/^([\w]+[\:]{2}[\w]+\,)*([\w]+[\:]{2}[\w]+)$/，其中a、b、c、d为数字、字母或下划线，</li>
<li>如果指标(isSearchF)为真，则必须有分组ID</li>
<li>逻辑类型(condLogicTypes)为数组</li>
<li></li>
<li>field下所有字段必须存在<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    baseTable: &apos;user&apos;,</div><div class="line">    // 一个Tab中对应的多张表中的有信息的配置字段</div><div class="line">    configFields: &#123;</div><div class="line">        user: &#123;</div><div class="line">            tableConf: &#123;</div><div class="line">                isShowTime: true,</div><div class="line">                timeField: &apos;time&apos;</div><div class="line">            &#125;,</div><div class="line">            fields: &#123;</div><div class="line">                &apos;userId&apos;: &#123;</div><div class="line">                    value: &apos;1000&apos;, // 新增没有</div><div class="line">                    showName: &apos;用户ID&apos;,</div><div class="line">                    isCond: true,</div><div class="line">                    condRequire: &apos;true&apos;,</div><div class="line">                    condType: &apos;checkbox&apos;,</div><div class="line">                    condItems: [</div><div class="line">                        &#123;</div><div class="line">                            &apos;name&apos;: &apos;文章阅读量&apos;,</div><div class="line">                            &apos;value&apos;: &apos;1000&apos;</div><div class="line">                        &#125;</div><div class="line">                    ],</div><div class="line">                    condLogicTypes: [</div><div class="line">                        &apos;=&apos;,</div><div class="line">                        &apos;&gt;=&apos;,</div><div class="line">                        &apos;like&apos;</div><div class="line">                    ],</div><div class="line">                    isSearchF: &apos;true&apos;,</div><div class="line">                    isSearchFDefault: &apos;true&apos;,</div><div class="line">                    isSearchFRequire: &apos;true&apos;,</div><div class="line">                    isJoin: &apos;true&apos;,</div><div class="line">                    groupId: &apos;100&apos;,</div><div class="line">                    isDim: &apos;true&apos;</div><div class="line">                &#125;,</div><div class="line">                &apos;userName&apos;: &#123;</div><div class="line">                    value: &apos;1001&apos;, // 新增没有</div><div class="line">                    showName: &apos;用户ID&apos;,</div><div class="line">                    isCond: true,</div><div class="line">                    condRequire: &apos;true&apos;,</div><div class="line">                    condType: &apos;checkbox&apos;,</div><div class="line">                    condItems: [</div><div class="line">                        &#123;</div><div class="line">                            &apos;name&apos;: &apos;文章阅读量&apos;,</div><div class="line">                            &apos;value&apos;: &apos;1000&apos;</div><div class="line">                        &#125;</div><div class="line">                    ],</div><div class="line">                    condLogicTypes: [</div><div class="line">                        &apos;=&apos;,</div><div class="line">                        &apos;&gt;=&apos;,</div><div class="line">                        &apos;like&apos;</div><div class="line">                    ],</div><div class="line">                    isSearchF: &apos;true&apos;,</div><div class="line">                    isSearchFDefault: &apos;true&apos;,</div><div class="line">                    isSearchFRequire: &apos;true&apos;,</div><div class="line">                    isJoin: &apos;true&apos;,</div><div class="line">                    groupId: &apos;100&apos;,</div><div class="line">                    isDim: &apos;true&apos;</div><div class="line">                &#125;,</div><div class="line">                &apos;time&apos;: &#123;</div><div class="line">                    value: &apos;1001&apos;, // 新增没有</div><div class="line">                    showName: &apos;用户ID&apos;,</div><div class="line">                    isCond: true,</div><div class="line">                    condRequire: &apos;true&apos;,</div><div class="line">                    condType: &apos;dateRange&apos;,</div><div class="line">                    condItems: [],</div><div class="line">                    condLogicTypes: [],</div><div class="line">                    isSearchF: &apos;true&apos;,</div><div class="line">                    isSearchFDefault: &apos;true&apos;,</div><div class="line">                    isSearchFRequire: &apos;true&apos;,</div><div class="line">                    isJoin: &apos;true&apos;,</div><div class="line">                    groupId: &apos;100&apos;,</div><div class="line">                    isDim: &apos;true&apos;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
<h1 id="验证器"><a href="#验证器" class="headerlink" title="验证器"></a>验证器</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    baseTable: &#123;type: &quot;string&quot;, required: true&#125;,</div><div class="line">    tabConf: [</div><div class="line">        &#123;</div><div class="line">            type: &quot;object&quot;,</div><div class="line">            required: true,</div><div class="line">            fields: &#123;</div><div class="line">                isShowTime: &#123;type: &quot;boolean&quot;, required: true&#125;,</div><div class="line">                timeField: &#123;type: &quot;string&quot;, required: true&#125;</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            validator(rule, value, callback, source, options) &#123;</div><div class="line">                console.log(value)</div><div class="line">                if (value.isShowTime) &#123;</div><div class="line">                    if (!value.timeField) &#123;</div><div class="line">                        callback(new Error(&apos;如果使用时间，则必须选择时间字段!&apos;));</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    ],</div><div class="line">    fieldItem: [</div><div class="line">        &#123;</div><div class="line">            type: &apos;object&apos;,</div><div class="line">            required: true,</div><div class="line">            fields: &#123;</div><div class="line">                isJoin: &#123;</div><div class="line">                    type: &quot;boolean&quot;,</div><div class="line">                    required: true</div><div class="line">                &#125;,</div><div class="line">                isDim: &#123;</div><div class="line">                    type: &quot;boolean&quot;,</div><div class="line">                    required: true</div><div class="line">                &#125;,</div><div class="line">                value: &#123;</div><div class="line">                    type: &quot;string&quot;,</div><div class="line">                    required: true</div><div class="line">                &#125;,</div><div class="line">                showName: &#123;</div><div class="line">                    type: &quot;string&quot;,</div><div class="line">                    required: true,</div><div class="line">                    min: 1,</div><div class="line">                    max: 6</div><div class="line">                &#125;,</div><div class="line">                condItems: &#123;</div><div class="line">                    type: &quot;string&quot;,</div><div class="line">                    required: true,</div><div class="line">                    pattern: /^([\w]+[\:]&#123;2&#125;[\w]+\,)*([\w]+[\:]&#123;2&#125;[\w]+)$/</div><div class="line">                &#125;,</div><div class="line">                isCond: &#123;</div><div class="line">                    type: &quot;boolean&quot;,</div><div class="line">                    required: true</div><div class="line">                &#125;,</div><div class="line">                condType: &#123;</div><div class="line">                    type: &quot;enum&quot;,</div><div class="line">                    enum: [&apos;select&apos;, &apos;multi&apos;]</div><div class="line">                &#125;,</div><div class="line">                condLogicTypes: &#123;</div><div class="line">                    type: &quot;array&quot;,</div><div class="line">                    required: true</div><div class="line">                &#125;,</div><div class="line">                condRequire: &#123;</div><div class="line">                    type: &quot;boolean&quot;,</div><div class="line">                    required: true</div><div class="line">                &#125;,</div><div class="line">                isCondDefault: &#123;</div><div class="line">                    type: &quot;boolean&quot;,</div><div class="line">                    required: true</div><div class="line">                &#125;,</div><div class="line">                isSearchF: &#123;</div><div class="line">                    type: &quot;boolean&quot;,</div><div class="line">                    required: true</div><div class="line">                &#125;,</div><div class="line">                isSearchFDefault: &#123;</div><div class="line">                    type: &quot;boolean&quot;,</div><div class="line">                    required: true</div><div class="line">                &#125;,</div><div class="line">                isSearchFRequire: &#123;</div><div class="line">                    type: &quot;boolean&quot;,</div><div class="line">                    required: true</div><div class="line">                &#125;,</div><div class="line">                groupId: &#123;</div><div class="line">                    type: &quot;string&quot;,</div><div class="line">                    required: true,</div><div class="line">                    pattern: /^[\d]+$/</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="格式化数据结构"><a href="#格式化数据结构" class="headerlink" title="格式化数据结构"></a>格式化数据结构</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">[</div><div class="line">    &#123;</div><div class="line">        prop: &apos;baseTable&apos;,</div><div class="line">        value: &apos;1111&apos;,</div><div class="line">        path: []</div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        prop: &apos;tabConf&apos;,</div><div class="line">        value: &#123;</div><div class="line">            isShowTime: true,</div><div class="line">            timeField: &apos;day&apos;</div><div class="line">        &#125;,</div><div class="line">        path: [&apos;table1&apos;]</div><div class="line">        </div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        prop: &apos;fieldItem&apos;,</div><div class="line">        value: &#123;</div><div class="line">            isJoin: true,</div><div class="line">            isDim: true,</div><div class="line">            value: &apos;1000&apos;,</div><div class="line">            showName: &apos;day&apos;,</div><div class="line">            condItems: &apos;a::b,c::d&apos;,</div><div class="line">            isCond: true,</div><div class="line">            condType: &apos;select&apos;,</div><div class="line">            condLogicTypes: [&apos;aa&apos;, &apos;bb&apos;, &apos;cc&apos;],</div><div class="line">            condRequire: true,</div><div class="line">            isCondDefault: true,</div><div class="line">            isSearchF: true,</div><div class="line">            isSearchFDefault: true,</div><div class="line">            isSearchFRequire: true,</div><div class="line">            groupId: &apos;10&apos;</div><div class="line">        &#125;,</div><div class="line">        path: [&apos;table1&apos;, &apos;field1&apos;]</div><div class="line">    &#125;</div><div class="line">]</div></pre></td></tr></table></figure>
<h1 id="进行验证"><a href="#进行验证" class="headerlink" title="进行验证"></a>进行验证</h1>
      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/10/20/JavaScript进行数据验证/" class="archive-article-date">
  	<time datetime="2017-10-20T14:41:00.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-10-20</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/validate/">validate</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/学习/">学习</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>












  
    <article id="post-Sizzle深入理解" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/14/Sizzle深入理解/">Sizzle深入理解</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>本文内容主要“抄袭”与高云所著的《jQuery技术内幕》，算是我学习完Sizzle源码后的一点总结。本文依赖于jQuery-1.7.2，本文将忽略掉很多细节，着重从整体结构和思路讲解sizzle根据一个选择器进行dom元素匹配。</p>
</blockquote>
<p>如何获取Dom元素？在不同的阶段，对其认识，理解都是完全不同的，它一直困扰着我，也一直提醒着我。它是前端开发的起点，也是前端开发的梦魇。虽然如今新框架让我们可以从中解放出来，但是能更高的理解它，仍对我意义重大。jQuery如何实现兼容各种浏览器的Dom元素查找器是我在前端开发的学习和工作中一直都在思考的问题。本文将简述jQuery的Sizzle，这个纯JavaScript实现的CSS选择器引擎。</p>
<p>在jQuery中，我们可以通过<code>$(&#39;#main&#39;)</code>、<code>$(&#39;#main .main-box&#39;)</code>、<code>$(&#39;#main .main-box p&#39;)</code>甚至于<code>$(&#39;#main .main-box p ul li:eq(2)&#39;)</code>、<code>$(&#39;#main .main-box p ul li:eq(2) input[name=&quot;key&quot;]&#39;)</code>来查找Dom元素。Sizzle如何实现这些功能，而我们又将如何高效的使用这些功能，都需要我们深入源码，思考其工作原理。</p>
<h1 id="先看入口"><a href="#先看入口" class="headerlink" title="先看入口"></a>先看入口</h1><p>如下是jQuery的初始化方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div></pre></td><td class="code"><pre><div class="line">jQuery.fn = jQuery.prototype = &#123;</div><div class="line">		constructor: jQuery,</div><div class="line">		init: function( selector, context, rootjQuery ) &#123;</div><div class="line">      ...</div><div class="line">      // The body element only exists once, optimize finding it</div><div class="line">			if ( selector === &quot;body&quot; &amp;&amp; !context &amp;&amp; document.body ) &#123;</div><div class="line">				...</div><div class="line">			&#125;</div><div class="line">      ...</div><div class="line">			// Handle HTML strings</div><div class="line">			if ( typeof selector === &quot;string&quot; ) &#123;</div><div class="line">				// Are we dealing with HTML string or an ID?</div><div class="line">				if ( selector.charAt(0) === &quot;&lt;&quot; &amp;&amp; selector.charAt( selector.length - 1 ) === &quot;&gt;&quot; &amp;&amp; selector.length &gt;= 3 ) &#123;</div><div class="line">          ...</div><div class="line">				&#125; else &#123;</div><div class="line">					match = quickExpr.exec( selector );</div><div class="line">				&#125;</div><div class="line">				// Verify a match, and that no context was specified for #id</div><div class="line">				if ( match &amp;&amp; (match[1] || !context) ) &#123;</div><div class="line"></div><div class="line">					// HANDLE: $(html) -&gt; $(array)</div><div class="line">					if ( match[1] ) &#123;</div><div class="line">            ...</div><div class="line">					// HANDLE: $(&quot;#id&quot;)</div><div class="line">					&#125; else &#123;</div><div class="line">						elem = document.getElementById( match[2] );</div><div class="line"></div><div class="line">						// Check parentNode to catch when Blackberry 4.6 returns</div><div class="line">						// nodes that are no longer in the document #6963</div><div class="line">						if ( elem &amp;&amp; elem.parentNode ) &#123;</div><div class="line">							// Handle the case where IE and Opera return items</div><div class="line">							// by name instead of ID</div><div class="line">							if ( elem.id !== match[2] ) &#123;</div><div class="line">								return rootjQuery.find( selector );</div><div class="line">							&#125;</div><div class="line"></div><div class="line">							// Otherwise, we inject the element directly into the jQuery object</div><div class="line">							this.length = 1;</div><div class="line">							this[0] = elem;</div><div class="line">						&#125;</div><div class="line"></div><div class="line">						this.context = document;</div><div class="line">						this.selector = selector;</div><div class="line">						return this;</div><div class="line">					&#125;</div><div class="line">				// HANDLE: $(expr, $(...))</div><div class="line">				&#125; else if ( !context || context.jquery ) &#123;</div><div class="line">          ...</div><div class="line">				// HANDLE: $(expr, context)</div><div class="line">				// (which is just equivalent to: $(context).find(expr)</div><div class="line">				&#125; else &#123;</div><div class="line">					return this.constructor( context ).find( selector );</div><div class="line">				&#125;</div><div class="line">			// HANDLE: $(function)</div><div class="line">			// Shortcut for document ready</div><div class="line">			&#125; else if ( jQuery.isFunction( selector ) ) &#123;</div><div class="line">				...</div><div class="line">			&#125;</div><div class="line"></div><div class="line">			if ( selector.selector !== undefined ) &#123;</div><div class="line">				this.selector = selector.selector;</div><div class="line">				this.context = selector.context;</div><div class="line">			&#125;</div><div class="line"></div><div class="line">			return jQuery.makeArray( selector, this );</div><div class="line">		&#125;,</div></pre></td></tr></table></figure>
<p>在jQuery的init方法中，根据输入参数的类型，来进行不同的处理。其中有几个地方是和Dom查找相关的。</p>
<h2 id="selector-quot-body-quot-amp-amp-context-amp-amp-document-body"><a href="#selector-quot-body-quot-amp-amp-context-amp-amp-document-body" class="headerlink" title="selector === &quot;body&quot; &amp;&amp; !context &amp;&amp; document.body"></a><code>selector === &quot;body&quot; &amp;&amp; !context &amp;&amp; document.body</code></h2><p>输入选择器为body时，且没有上下文时，直接获取body元素<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">if ( selector === &quot;body&quot; &amp;&amp; !context &amp;&amp; document.body ) &#123;</div><div class="line">  this.context = document; // 返回jQuery对象的上下文是document</div><div class="line">  this[0] = document.body; // 返回jQuery对象的第一个元素是document.body</div><div class="line">  this.selector = selector; // 返回jQuery对象的的选择器为入参selector，即&apos;body&apos;</div><div class="line">  this.length = 1; // 返回jQuery对象的长度为1</div><div class="line">  return this; // 返回jQuery对象</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="typeof-selector-“string”"><a href="#typeof-selector-“string”" class="headerlink" title="typeof selector === “string”"></a>typeof selector === “string”</h2><p>如果输入选择器为非’body’的字符串，将首先看选择器是否是HTML代码或者为’#id’这样的ID选择器。这部分的关键地方在于用<code>quickExpr = /^(?:[^#&lt;]*(&lt;[\w\W]+&gt;)[^&gt;]*$|#([\w\-]*)$)/</code>正则去匹配selector。它匹配一个类似HTML片段的字符串或者一个以#开头的字符串,请看如下例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">|selector               | quickExpr.exec(selector)           |</div><div class="line">|:----------------------|:-----------------------------------|</div><div class="line">|&apos;#target&apos;              | [&quot;#target&quot;, undefined, target]     |</div><div class="line">|&apos;&lt;div&gt;&apos;                | [&quot;&lt;div&gt;&quot;, &quot;&lt;div&gt;&quot;, undefined]      |</div><div class="line">|&apos;div&apos;                  | null                               |</div><div class="line">|&apos;&lt;div&gt;&lt;img&gt;&lt;/div&gt;&apos;     | [&quot;&lt;div&gt;&lt;img&gt;&lt;/div&gt;&quot;, &quot;&lt;div&gt;&lt;img&gt;&lt;/div&gt;&quot;, undefined]  |</div></pre></td></tr></table></figure></p>
<p>需要考虑的是其中的’#target’这种情况。此时直接使用getElementById获取元素。</p>
<p>如果匹配失败则认为selector是选择器，调用jQuery的find方法来处理。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">// HANDLE: $(expr, $(...))</div><div class="line">&#125; else if ( !context || context.jquery ) &#123;</div><div class="line">  ...</div><div class="line">// HANDLE: $(expr, context)</div><div class="line">// (which is just equivalent to: $(context).find(expr)</div><div class="line">&#125; else &#123;</div><div class="line">  return this.constructor( context ).find( selector );</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>而jQuery的find方法，就是sizzle。</p>
<h2 id="先窥探一下Sizzle"><a href="#先窥探一下Sizzle" class="headerlink" title="先窥探一下Sizzle"></a>先窥探一下Sizzle</h2><p>首先看下sizzle这个函数:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var Sizzle = function( selector, context, results, seed ) &#123;</div><div class="line">	...</div><div class="line">	return results;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>省略调所有的函数内容，sizzle函数结构就变得很简单了。它接受选择器，上下文对象，结果集，过滤元素集合。都是对传入结果集的进一步筛选。</p>
<p>当sizzle接受到一个字符串后，将会对其进行类似如下的处理：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">var selector = &apos;#main .head &gt; p ul li:eq(3) , #main .head &gt; p ul li:eq(5)&apos;;</div><div class="line">var chunker = /((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|[&apos;&quot;][^&apos;&quot;]*[&apos;&quot;]|[^\[\]&apos;&quot;]+)+\]|\\.|[^ &gt;+~,(\[\\]+)+|[&gt;+~])(\s*,\s*)?((?:.|\r|\n)*)/g;</div><div class="line">var m, set, extra,</div><div class="line">parts = [],</div><div class="line">soFar = selector;</div><div class="line"></div><div class="line">// Reset the position of the chunker regexp (start from head)</div><div class="line">do &#123;</div><div class="line">  chunker.exec( &quot;&quot; );</div><div class="line">  m = chunker.exec( soFar );</div><div class="line"></div><div class="line">  if ( m ) &#123;</div><div class="line">    soFar = m[3];</div><div class="line"></div><div class="line">    parts.push( m[1] );</div><div class="line"></div><div class="line">    if ( m[2] ) &#123;</div><div class="line">      extra = m[3];</div><div class="line">      break;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125; while ( m );</div><div class="line">parts);</div><div class="line">extra);</div></pre></td></tr></table></figure></p>
<p>如上代码执行完后，我们得到的parts和extra如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">parts = [&quot;#main&quot;, &quot;.head&quot;, &quot;&gt;&quot;, &quot;p&quot;, &quot;ul&quot;, &quot;li:eq(3)&quot;];</div><div class="line">extra = &apos;#main .head &gt; p ul li:eq(5)&apos;;</div></pre></td></tr></table></figure></p>
<p>现在我明白sizzle的一个基本原理了，就是化繁为简。通过chunker这个复杂的正则表达式，将选择器拆分成数组。如果有extra，只需要在对其调用一次sizzle就可以了。</p>
<p>关于chunker这个正则表达式，后面再专门写一篇文章总结吧。</p>
<p>后面的篇幅重点分析，sizzle如何对这个包含各种单一选择器信息的数组进行处理，从而精确匹配到dom元素。在这个过程中，sizzle对性能、代码结构组织的考虑让我犹如进了大观园，惊奇巧妙可谓无处不在啊！</p>
<p>但是在进入这个过程前，我们还需要看一下sizzle的加速器。</p>
<h1 id="利用浏览器原生API对查找过程进行加速"><a href="#利用浏览器原生API对查找过程进行加速" class="headerlink" title="利用浏览器原生API对查找过程进行加速"></a>利用浏览器原生API对查找过程进行加速</h1>
      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/06/14/Sizzle深入理解/" class="archive-article-date">
  	<time datetime="2017-06-14T14:41:00.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-06-14</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Sizzle/">Sizzle</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jQuery/">jQuery</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/获取Dom元素/">获取Dom元素</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>












  
    <article id="post-2.8.2、静态属性和方法－类型检测" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/04/2.8.2、静态属性和方法－类型检测/">jQuery技术内幕 2.8.2、静态属性和方法－类型检测</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="type"><a href="#type" class="headerlink" title="$.type()"></a>$.type()</h1><p><strong>生成class2type:</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var class2type = [];</div><div class="line">$.each(&quot;Boolean Number String Function Array Date RegExp Object&quot;.split(&quot; &quot;), function(i, name)&#123;</div><div class="line">    class2type[&quot;[object &quot; + name + &quot;]&quot;] = name.toLowerCase();</div><div class="line">&#125;);</div><div class="line">console.log(class2type);</div></pre></td></tr></table></figure></p>
<p><strong>class2type数组:</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">/** </div><div class="line">[</div><div class="line">    [object Array]:&quot;array&quot;</div><div class="line">    [object Boolean]:&quot;boolean&quot;</div><div class="line">    [object Date]:&quot;date&quot;</div><div class="line">    [object Function]:&quot;function&quot;</div><div class="line">    [object Number]:&quot;number&quot;</div><div class="line">    [object Object]:&quot;object&quot;</div><div class="line">    [object RegExp]:&quot;regexp&quot;</div><div class="line">    [object String]:&quot;string&quot;</div><div class="line">]</div><div class="line">**/</div></pre></td></tr></table></figure></p>
<p><strong>定义类型检测方法:</strong><br>利用<code>Object.prototype.toString.call()</code>,由于该方法在es5之后才能对<code>null</code>、<code>undefined</code>返回正确的值，所以需要额外处理,原因在后面有详细分析。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">function type(obj)&#123;</div><div class="line">    /**</div><div class="line">    Since JavaScript ES5</div><div class="line">    Object.prototype.toString.call(undefined);   // [object Undefined]</div><div class="line">    Object.prototype.toString.call(null);        // [object Null]</div><div class="line">    **/</div><div class="line">    return obj == null ? String(obj) : class2type[Object.prototype.toString.call(obj)] || &quot;object&quot;;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="String"><a href="#String" class="headerlink" title="String()"></a>String()</h2><p>ES3:<br><code>String(value)</code>在ES3中的定义:</p>
<blockquote>
<p>15.5.1 The String Constructor Called as a Function</p>
<blockquote>
<p>When String is called as a function rather than as a constructor, it performs a type conversion.<br>当String作为函数而不是作为构造函数调用时，它执行类型转换。</p>
</blockquote>
<p>15.5.1.1 String ( [ value ] )</p>
<blockquote>
<p>Returns a string value (not a String object) computed by ToString(value). If value is not supplied, the<br>empty string “” is returned.<br>返回由ToString（value）计算的字符串值（而不是String对象）。 如果未提供值，则<br>返回空字符串“”。</p>
</blockquote>
</blockquote>
<p>ES5:</p>
<blockquote>
<p>15.5.1 The String Constructor Called as a Function</p>
<blockquote>
<p>When String is called as a function rather than as a constructor, it performs a type conversion.<br>当String作为函数而不是作为构造函数调用时，它执行类型转换。</p>
</blockquote>
<p>15.5.1.1 String ( [ value ] )</p>
<blockquote>
<p>Returns a String value (not a String object) computed by ToString(value). If value is not supplied, the empty String “” is returned.<br>返回由ToString（value）计算的字符串值（而不是String对象）。 如果未提供值，则<br>返回空字符串“”。</p>
</blockquote>
</blockquote>
<h2 id="toString-NaN"><a href="#toString-NaN" class="headerlink" title="toString()"></a>toString()</h2><p>ES3 &amp;&amp; ES5</p>
<blockquote>
<p>9.8 ToString</p>
<blockquote>
<p>The abstract operation ToString converts its argument to a value of type String according to Table:</p>
</blockquote>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:left">Argument Type</th>
<th style="text-align:left">Result</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Undefined</td>
<td style="text-align:left">“undefined”</td>
</tr>
<tr>
<td style="text-align:left">Null</td>
<td style="text-align:left">“null”</td>
</tr>
<tr>
<td style="text-align:left">…(仅截取部分)</td>
</tr>
</tbody>
</table>
<p>以上得知，<code>type()</code>方法中当传入值为<code>undefined</code>或者<code>null</code>时，用<code>String()</code>来处理，而<code>String()</code>方法其实也是按照<code>toString()</code>来处理的,<code>toString()</code>对<code>undefined</code>和<code>null</code>进行了专门的处理。当传入值为其它时，则使用<code>Object.prototype.toString.call()</code>来处理。<br>下面来看下对于<code>Object.prototype.toString</code>的官方定义。<br>ES3</p>
<blockquote>
<p>15.2.4.2 Object.prototype.toString ( )</p>
<blockquote>
<p>When the toString method is called, the following steps are taken:</p>
<ol>
<li>Get the [[Class]] property of this object.</li>
<li>Compute a string value by concatenating the three strings “[object “, Result(1), and “]”.</li>
<li>Return Result(2).</li>
</ol>
</blockquote>
</blockquote>
<h2 id="Object-prototype-toString"><a href="#Object-prototype-toString" class="headerlink" title="Object.prototype.toString"></a>Object.prototype.toString</h2><p>ES5</p>
<blockquote>
<p>15.2.4.2 Object.prototype.toString ( )</p>
<blockquote>
<p>When the toString method is called, the following steps are taken:</p>
<ol>
<li>If the this value is undefined, return “[object Undefined]”.</li>
<li>If the this value is null, return “[object Null]”.</li>
<li>Let O be the result of calling ToObject passing the this value as the argument.</li>
<li>Let class be the value of the [[Class]] internal property of O.</li>
<li>Return the String value that is the result of concatenating the three Strings “[object “, class, and “]”.</li>
</ol>
</blockquote>
</blockquote>
<p>由以上定义发现,<code>Object.prototype.toString</code>方法被调用时，都会获取当前对象的[[class]]属性,但是<strong>ES5</strong>相比于<strong>ES3</strong>多了对于”undefined”和”null”的定义，这也是<code>type()</code>方法为了兼容低版本浏览器对<code>obj == null</code>的情况进行特殊处理的原因。</p>
<p><strong>测试:</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">console.log(type(null)); //null</div><div class="line">console.log(type(undefined)); //undefined</div><div class="line">console.log(type(&#123;&#125;)); //object</div><div class="line">console.log(type([])); //array</div><div class="line">console.log(type(0)); //number</div><div class="line">console.log(type(/a/)); //regexp</div><div class="line">console.log(type(new Date())); //date</div><div class="line">console.log(type(&apos;&apos;)); string</div></pre></td></tr></table></figure></p>
<p>API详解<br>The toString() method returns a string representing the object.</p>
<ul>
<li><p>Syntax</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">obj.toString()</div></pre></td></tr></table></figure>
</li>
<li><p>Return value<br>A string representing the object.</p>
</li>
</ul>
<h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p>Every object has a toString() method that is automatically called when the object is to be represented as a text value or when an object is referred to in a manner in which a string is expected. By default, the toString() method is inherited by every object descended from Object. If this method is not overridden in a custom object, toString() returns “[object type]”, where type is the object type. The following code illustrates this:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var o = new Object();</div><div class="line">o.toString(); // returns [object Object]</div></pre></td></tr></table></figure></p>
<p><strong>Note: Starting in JavaScript 1.8.5 toString() called on null returns [object Null], and undefined returns [object Undefined], as defined in the 5th Edition of ECMAScript and a subsequent Errata. See Using_toString()_to_detect_object_class.</strong></p>
<h3 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h3><p>Overriding the default toString method</p>
<p>You can create a function to be called in place of the default toString() method. The toString() method takes no arguments and should return a string. The toString() method you create can be any value you want, but it will be most useful if it carries information about the object.</p>
<p>The following code defines the Dog object type and creates theDog, an object of type Dog:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">function Dog(name, breed, color, sex) &#123;</div><div class="line">  this.name = name;</div><div class="line">  this.breed = breed;</div><div class="line">  this.color = color;</div><div class="line">  this.sex = sex;</div><div class="line">&#125;</div><div class="line"></div><div class="line">theDog = new Dog(&apos;Gabby&apos;, &apos;Lab&apos;, &apos;chocolate&apos;, &apos;female&apos;);</div></pre></td></tr></table></figure></p>
<p>If you call the toString() method on this custom object, it returns the default value inherited from Object:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">theDog.toString(); // returns [object Object]</div></pre></td></tr></table></figure></p>
<p>The following code creates and assigns dogToString() to override the default toString() method. This function generates a string containing the name, breed, color, and sex of the object, in the form “property = value;”.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Dog.prototype.toString = function dogToString() &#123;</div><div class="line">  var ret = &apos;Dog &apos; + this.name + &apos; is a &apos; + this.sex + &apos; &apos; + this.color + &apos; &apos; + this.breed;</div><div class="line">  return ret;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>With the preceding code in place, any time theDog is used in a string context, JavaScript automatically calls the dogToString() function, which returns the following string:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&quot;Dog Gabby is a female chocolate Lab&quot;</div></pre></td></tr></table></figure></p>
<h3 id="Using-toString-to-detect-object-class"><a href="#Using-toString-to-detect-object-class" class="headerlink" title="Using toString() to detect object class"></a>Using toString() to detect object class</h3><p>toString() can be used with every object and allows you to get its class. To use the Object.prototype.toString() with every object, you need to call Function.prototype.call() or Function.prototype.apply() on it, passing the object you want to inspect as the first parameter called thisArg.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">var toString = Object.prototype.toString;</div><div class="line"></div><div class="line">toString.call(new Date);    // [object Date]</div><div class="line">toString.call(new String);  // [object String]</div><div class="line">toString.call(Math);        // [object Math]</div><div class="line"></div><div class="line">// Since JavaScript 1.8.5</div><div class="line">toString.call(undefined);   // [object Undefined]</div><div class="line">toString.call(null);        // [object Null]</div></pre></td></tr></table></figure></p>
<h2 id="Boolean-prototype-toString"><a href="#Boolean-prototype-toString" class="headerlink" title="Boolean.prototype.toString()"></a>Boolean.prototype.toString()</h2><p>The toString() method returns a string representing the specified Boolean object.</p>
<ul>
<li><p>Syntax</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bool.toString()</div></pre></td></tr></table></figure>
</li>
<li><p>Return value</p>
</li>
</ul>
<p>A string representing the specified Boolean object.</p>
<h3 id="Description-1"><a href="#Description-1" class="headerlink" title="Description"></a>Description</h3><p>The Boolean object overrides the toString method of the Object object; it does not inherit Object.prototype.toString(). For Boolean objects, the toString method returns a string representation of the object.</p>
<p>JavaScript calls the toString method automatically when a Boolean is to be represented as a text value or when a Boolean is referred to in a string concatenation.</p>
<p>For Boolean objects and values, the built-in toString method returns the string “true” or “false” depending on the value of the boolean object.</p>
<h3 id="Examples-1"><a href="#Examples-1" class="headerlink" title="Examples"></a>Examples</h3><p>Using toString<br>In the following code, flag.toString() returns “true”:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var flag = new Boolean(true);</div><div class="line">var myVar = flag.toString();</div></pre></td></tr></table></figure></p>
<h2 id="String-prototype-toString"><a href="#String-prototype-toString" class="headerlink" title="String.prototype.toString()"></a>String.prototype.toString()</h2><p>The toString() method returns a string representing the specified object.</p>
<ul>
<li><p>Syntax</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">str.toString()</div></pre></td></tr></table></figure>
</li>
<li><p>Return value<br> A string representing the calling object.</p>
<h3 id="Description-2"><a href="#Description-2" class="headerlink" title="Description"></a>Description</h3><p><strong>The String object overrides the toString() method of the Object object; it does not inherit Object.prototype.toString().</strong> For String objects, the toString() method returns a string representation of the object and is the same as the String.prototype.valueOf() method.</p>
</li>
</ul>
<h3 id="Examples-2"><a href="#Examples-2" class="headerlink" title="Examples"></a>Examples</h3><p>Using toString()</p>
<p>The following example displays the string value of a String object:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var x = new String(&apos;Hello world&apos;);</div><div class="line">console.log(x.toString()); // logs &apos;Hello world&apos;</div></pre></td></tr></table></figure></p>
<h2 id="Error-prototype-toString"><a href="#Error-prototype-toString" class="headerlink" title="Error.prototype.toString()"></a>Error.prototype.toString()</h2><p>The toString() method returns a string representing the specified Error object.</p>
<ul>
<li><p>Syntax</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">e.toString()</div></pre></td></tr></table></figure>
</li>
<li><p>Return value<br>A string representing the specified Error object.</p>
</li>
</ul>
<h3 id="Description-3"><a href="#Description-3" class="headerlink" title="Description"></a>Description</h3><p>The Error object overrides the Object.prototype.toString() method inherited by all objects. Its semantics are as follows (assuming Object and String have their original values):<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">Error.prototype.toString = function() &#123;</div><div class="line">  &apos;use strict&apos;;</div><div class="line"></div><div class="line">  var obj = Object(this);</div><div class="line">  if (obj !== this) &#123;</div><div class="line">    throw new TypeError();</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  var name = this.name;</div><div class="line">  name = (name === undefined) ? &apos;Error&apos; : String(name);</div><div class="line"></div><div class="line">  var msg = this.message;</div><div class="line">  msg = (msg === undefined) ? &apos;&apos; : String(msg);</div><div class="line"></div><div class="line">  if (name === &apos;&apos;) &#123;</div><div class="line">    return msg;</div><div class="line">  &#125;</div><div class="line">  if (msg === &apos;&apos;) &#123;</div><div class="line">    return name;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  return name + &apos;: &apos; + msg;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<h3 id="Examples-3"><a href="#Examples-3" class="headerlink" title="Examples"></a>Examples</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">var e = new Error(&apos;fatal error&apos;);</div><div class="line">console.log(e.toString()); // &apos;Error: fatal error&apos;</div><div class="line"></div><div class="line">e.name = undefined;</div><div class="line">console.log(e.toString()); // &apos;Error: fatal error&apos;</div><div class="line"></div><div class="line">e.name = &apos;&apos;;</div><div class="line">console.log(e.toString()); // &apos;fatal error&apos;</div><div class="line"></div><div class="line">e.message = undefined;</div><div class="line">console.log(e.toString()); // &apos;Error&apos;</div><div class="line"></div><div class="line">e.name = &apos;hello&apos;;</div><div class="line">console.log(e.toString()); // &apos;hello&apos;</div></pre></td></tr></table></figure>
<h2 id="Number-prototype-toString"><a href="#Number-prototype-toString" class="headerlink" title="Number.prototype.toString()"></a>Number.prototype.toString()</h2><p>toString（）方法返回一个表示指定Number对象的字符串。</p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">numObj.toString([radix])</div></pre></td></tr></table></figure>
<ul>
<li>参数<br> <strong>radix:</strong> 可选的。 介于2和36之间的整数，指定用于表示数值的基数</li>
<li>返回值<br> 表示指定Number对象的字符串。</li>
<li>例外<br> <strong>RangeError:</strong> 如果toString（）的基数不在2和36之间，则抛出RangeError。</li>
</ul>
<h3 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h3><p>Number对象覆盖Object对象的toString（）方法; 它不继承Object.prototype.toString（）。对于Number对象，toString（）方法返回指定基数中对象的字符串表示形式。</p>
<p>toString（）方法解析其第一个参数，并尝试返回指定基数（基数）中的字符串表示形式。对于大于10的基数，字母表示大于9的数字。例如，对于十六进制数（基数16），使用a至f。</p>
<p>如果没有指定基数，则优选的基数假定为10。</p>
<p>如果numObj为负，则符号被保留。 即使基数是2，情况也是如此; 返回的字符串是前面带有 -符号的numObj的正二进制表示，而不是numObj的二进制补码。</p>
<p>如果numObj不是整数，“.”符号用于分隔小数位。</p>
<h2 id="Function-prototype-toString"><a href="#Function-prototype-toString" class="headerlink" title="Function.prototype.toString()"></a>Function.prototype.toString()</h2><p>The toString() method returns a string representing the source code of the function.</p>
<ul>
<li><p>Syntax</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">function.toString()</div></pre></td></tr></table></figure>
</li>
<li><p>Return value<br> A string representing the source code of the function.</p>
</li>
</ul>
<h3 id="Description-4"><a href="#Description-4" class="headerlink" title="Description"></a>Description</h3><p>The Function object overrides the toString method inherited from Object; it does not inherit Object.prototype.toString. For Function objects, the toString method returns a string representation of the object in the form of a function declaration. That is, toString decompiles the function, and the string returned includes the function keyword, the argument list, curly braces, and the source of the function body.</p>
<p>JavaScript calls the toString method automatically when a Function is to be represented as a text value, e.g. when a function is concatenated with a string.</p>
<p>The toString() method will throw a TypeError exception (“Function.prototype.toString called on incompatible object”), if its this value object is not a Function object. It will also throw for Proxy objects, for example.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Function.prototype.toString.call(&apos;foo&apos;); // TypeError</div><div class="line"></div><div class="line">var proxy = new Proxy(function() &#123;&#125;, &#123;&#125;);</div><div class="line">Function.prototype.toString.call(proxy); // TypeError</div></pre></td></tr></table></figure></p>
<h2 id="Array-prototype-toString"><a href="#Array-prototype-toString" class="headerlink" title="Array.prototype.toString()"></a>Array.prototype.toString()</h2><p>The toString() method returns a string representing the specified array and its elements.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var months = [&apos;Jan&apos;, &apos;Feb&apos;, &apos;Mar&apos;, &apos;Apr&apos;];</div><div class="line">months.toString(); // &quot;Jan,Feb,Mar,Apr&quot;</div></pre></td></tr></table></figure></p>
<ul>
<li><p>Syntax</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">arr.toString()</div></pre></td></tr></table></figure>
</li>
<li><p>Return value</p>
</li>
</ul>
<p>A string representing the elements of the array.</p>
<h3 id="Description-5"><a href="#Description-5" class="headerlink" title="Description"></a>Description</h3><p><strong>The Array object overrides the toString method of Object.</strong> For Array objects, the toString method joins the array and returns one string containing each array element separated by commas.</p>
<p>JavaScript calls the toString method automatically when an array is to be represented as a text value or when an array is referred to in a string concatenation.</p>
<p><strong>ECMAScript 5 semantics</strong><br>Starting in JavaScript 1.8.5 (Firefox 4), and consistent with ECMAScript 5th edition semantics, the toString() method is generic and can be used with any object. Object.prototype.toString() will be called, and the resulting value will be returned.</p>
<h1 id="isNumeric"><a href="#isNumeric" class="headerlink" title="$.isNumeric"></a>$.isNumeric</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">function isNumeric( obj )&#123;</div><div class="line">    return !isNaN( parseFloat(obj) ) &amp;&amp; isFinite( obj );</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="isEmptyObject"><a href="#isEmptyObject" class="headerlink" title="$.isEmptyObject"></a>$.isEmptyObject</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">function isEmptyObject(obj)&#123;</div><div class="line">    if(var name in obj)&#123;</div><div class="line">        return false;</div><div class="line">    &#125;</div><div class="line">    return true;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如果对象没有可枚举属性，则认为其为空对象。 js中基本包装类型的原型属性是不可枚举的，如<code>Object, Array, Number</code>等。<br>利用<code>defineProperty</code>定义的属性，并设置该属性不可枚举。<code>for in</code>无法遍历改属性。如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Object.defineProperty(Object, &quot;sex&quot;, &#123;</div><div class="line">    value: &quot;female&quot;,</div><div class="line">    enumerable: false</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/02/04/2.8.2、静态属性和方法－类型检测/" class="archive-article-date">
  	<time datetime="2017-02-04T14:41:00.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-02-04</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jQuery/">jQuery</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>












  
    <article id="post-CSS常用布局" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/04/CSS常用布局/">CSS常用的经典布局</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="CSS常用的经典布局"><a href="#CSS常用的经典布局" class="headerlink" title="CSS常用的经典布局"></a>CSS常用的经典布局</h1><p>CSS常用的经典布局包括:</p>
<ol>
<li>水平、垂直、水平垂直居中</li>
<li>一列定宽一列自适应布局</li>
<li>两列定宽一列自适应布局</li>
<li>两侧定宽中间自适应三列布局</li>
</ol>
<h2 id="水平、垂直、水平垂直居中"><a href="#水平、垂直、水平垂直居中" class="headerlink" title="水平、垂直、水平垂直居中"></a>水平、垂直、水平垂直居中</h2><h3 id="水平居中"><a href="#水平居中" class="headerlink" title="水平居中"></a>水平居中</h3><p>水平居中这个问题首先要搞清楚存在两个条件才能够称之为水平居中，即父元素必须是块级盒子容器，父元素宽度必须已经被设定好，在这两个前提下我们来看水平居中问题。</p>
<p>场景1：子元素是块级元素且宽度没有设定<br>在这种情况下，实际上也不存在水平居中一说，因为子元素是块级元素没有设定宽度，那么它会充满整个父级元素的宽度，即在水平位置上宽度和父元素一致</p>
<p>html代码:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;div class=&quot;wrap&quot;&gt;</div><div class="line">   &lt;div class=&quot;non-child&quot;&gt;</div><div class="line">      non-child</div><div class="line">   &lt;/div&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">.wrap&#123;</div><div class="line">          width: 300px;</div><div class="line">          height: 200px;</div><div class="line">          border: 2px solid #ccc;</div><div class="line">          box-sizing: border-box;</div><div class="line"></div><div class="line">      &#125;</div><div class="line">        .non-child&#123;</div><div class="line">            border: 1px solid #000;</div><div class="line">            background: green;</div><div class="line"></div><div class="line">        &#125;</div></pre></td></tr></table></figure>
<p>场景2：子元素是行内元素，子元素宽度是由其内容撑开的</p>
<p>这种情况下解决方案是给父元素设定<code>text-align:center;</code><br>html代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;div class=&quot;wrap center&quot;&gt;</div><div class="line">    &lt;span class=&quot;span&quot;&gt;1111&lt;/span&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<p>css代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">.wrap&#123;</div><div class="line">        width: 300px;</div><div class="line">        height: 200px;</div><div class="line">        border: 2px solid #ccc;</div><div class="line">        box-sizing: border-box;</div><div class="line">&#125;</div><div class="line">.span&#123;</div><div class="line">        background: red;</div><div class="line">&#125;</div><div class="line">.center&#123;</div><div class="line">        text-align: center;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>场景3 子元素是块级元素且宽度已经设定</p>
<p>这种情形存在多种解法，下面一一来列举</p>
<p>解法1：给子元素添加<code>margin:0 auto;</code></p>
<p>HTML代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;div class=&quot;wrap&quot;&gt;</div><div class="line">    &lt;div class=&quot;child auto&quot;&gt;</div><div class="line">        non-child</div><div class="line">    &lt;/div&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<p>css代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">.child&#123;</div><div class="line">        width: 100px;</div><div class="line">        height: 100px;</div><div class="line">        background: green;</div><div class="line">        box-sizing: border-box;</div><div class="line">&#125;</div><div class="line">.auto&#123;</div><div class="line">        margin:0 auto;</div><div class="line">&#125;</div><div class="line">.wrap&#123;</div><div class="line">        width: 300px;</div><div class="line">        height: 200px;</div><div class="line">        border: 2px solid #ccc;</div><div class="line">        box-sizing: border-box;</div><div class="line">  &#125;</div></pre></td></tr></table></figure></p>
<p>解法2：通过计算指定父元素的<code>padding-left</code>或<code>padding-right</code></p>
<p>HTML代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;div class=&quot;wrap padding&quot;&gt;</div><div class="line">    &lt;div class=&quot;child &quot;&gt;</div><div class="line">        non-child</div><div class="line">    &lt;/div&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<p>css代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">.child&#123;</div><div class="line">        width: 100px;</div><div class="line">        height: 100px;</div><div class="line">        background: green;</div><div class="line">        box-sizing: border-box;</div><div class="line">&#125;</div><div class="line">.padding&#123;</div><div class="line">        padding-left: 100px;</div><div class="line">&#125;</div><div class="line">.wrap&#123;</div><div class="line">        width: 300px;</div><div class="line">        height: 200px;</div><div class="line">        border: 2px solid #ccc;</div><div class="line">        box-sizing: border-box;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>结果同上，这里计算父元素<code>padding-left</code>或padding-right的方法为(父元素宽度-子元素宽度)/2,注意这里为了计算方便给父元素和子元素都设定了<code>box-sizing:border-box</code>,这样设定的宽度就是包含<code>border+padding+content</code>整个宽度来计算的，如果不设定<code>box-sizing:border-box</code>，浏览器默认是认为<code>content-box</code>,所以设定的宽度仅包含<code>content</code>的宽度，在这种情况下，计算父容器的<code>padding-left</code>或<code>padding-right</code>的方式就是[（父容器content宽度+左右border宽度）-(子容器content宽+水平padding宽+左右border宽)]/2,可以看到较为麻烦，所以这里建议让父元素和子元素都采取<code>border-box</code>.</p>
<p>解法3：计算得到子元素的<code>margin-left</code>或<code>margin-right</code></p>
<p>html代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;div class=&quot;wrap&quot;&gt;</div><div class="line">    &lt;div class=&quot;child margin&quot;&gt;</div><div class="line">        non-child</div><div class="line">    &lt;/div&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<p>css代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">.child&#123;</div><div class="line">        width: 100px;</div><div class="line">        height: 100px;</div><div class="line">        background: green;</div><div class="line">        box-sizing: border-box;</div><div class="line">&#125;</div><div class="line">.margin&#123;</div><div class="line">        margin-left:100px;</div><div class="line">&#125;</div><div class="line">.wrap&#123;</div><div class="line">        width: 300px;</div><div class="line">        height: 200px;</div><div class="line">        border: 2px solid #ccc;</div><div class="line">        box-sizing: border-box;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这里计算子元素<code>margin-left</code>或<code>margin-right</code>的方法同上。</p>
<p>解法4：通过子元素相对父元素绝对定位</p>
<p>html代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;div class=&quot;relative&quot;&gt;</div><div class="line">    &lt;div class=&quot;child absolute&quot;&gt;</div><div class="line">        non-child</div><div class="line">    &lt;/div&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<p>css代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">.relative&#123;</div><div class="line">            width: 300px;</div><div class="line">            height: 200px;</div><div class="line">            border: 2px solid #ccc;</div><div class="line">            box-sizing: border-box;</div><div class="line">            position: relative;</div><div class="line">        &#125;</div><div class="line">.absolute&#123;</div><div class="line">            position: absolute;</div><div class="line">            left:50%;</div><div class="line">            margin-left:-50px;</div><div class="line">&#125;</div><div class="line">.child&#123;</div><div class="line">            width: 100px;</div><div class="line">            height: 100px;</div><div class="line">            background: green;</div><div class="line">            box-sizing: border-box;</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>结果同上，这里还要设定子元素<code>margin-top</code>为<code>-50</code>是需要消除父元素50%造成的偏移</p>
<p>解法5：利用flex-box<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;div class=&quot;flex&quot;&gt;</div><div class="line">    &lt;div class=&quot;child &quot;&gt;</div><div class="line">        non-child</div><div class="line">    &lt;/div&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<p>css代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">.flex&#123;</div><div class="line">        width: 300px;</div><div class="line">        height: 200px;</div><div class="line">        border: 2px solid #ccc;</div><div class="line">        box-sizing: border-box;</div><div class="line">        display:flex;</div><div class="line">        flex-direction: row;</div><div class="line">        justify-content:center;</div><div class="line">&#125;</div><div class="line">.child&#123;</div><div class="line">        width: 100px;</div><div class="line">        height: 100px;</div><div class="line">        background: green;</div><div class="line">        box-sizing: border-box;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>2.垂直居中</p>
<p>和水平居中一样，这里要讲垂直居中，首先设定两个条件即父元素是盒子容器且高度已经设定</p>
<p>场景1：子元素是行内元素，高度是由其内容撑开的</p>
<p>这种情况下，需要通过设定父元素的<code>line-height</code>为其高度来使得子元素垂直居中</p>
<p>html代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;div class=&quot;wrap line-height&quot;&gt;</div><div class="line">    &lt;span class=&quot;span&quot;&gt;111111&lt;/span&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<p>css代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"> .wrap&#123;</div><div class="line">        width:200px ;</div><div class="line">        height: 300px;</div><div class="line">        border: 2px solid #ccc;</div><div class="line">        box-sizing: border-box;</div><div class="line">    &#125;</div><div class="line">.span&#123;</div><div class="line">        background: red;</div><div class="line">&#125;</div><div class="line">.line-height&#123;</div><div class="line">        line-height: 300px;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>场景2：子元素是块级元素但是子元素高度没有设定，在这种情况下实际上是不知道子元素的高度的，无法通过计算得到<code>padding</code>或<code>margin</code>来调整，但是还是存在一些解法。</p>
<p>解法1：通过给父元素设定<code>display:table-cell;vertical-align:middle</code>来解决</p>
<p>html代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;div class=&quot;wrap table-cell&quot;&gt;</div><div class="line">    &lt;div class=&quot;non-height &quot;&gt;11111&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<p>css代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">.table-cell&#123;</div><div class="line">            display: table-cell;</div><div class="line">            vertical-align: middle;</div><div class="line">        &#125;</div><div class="line">.non-height&#123;</div><div class="line">            background: green;</div><div class="line">        &#125;</div><div class="line">.wrap&#123;</div><div class="line">            width:200px ;</div><div class="line">            height: 300px;</div><div class="line">            border: 2px solid #ccc;</div><div class="line">            box-sizing: border-box;</div><div class="line">        &#125;</div></pre></td></tr></table></figure></p>
<p>解法2：flexbox</p>
<p>html代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;div class=&quot;wrap flex&quot;&gt;</div><div class="line">    &lt;div class=&quot;non-height &quot;&gt;1111&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<p>css代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">.wrap&#123;</div><div class="line">        width:200px ;</div><div class="line">        height: 300px;</div><div class="line">        border: 2px solid #ccc;</div><div class="line">        box-sizing: border-box;</div><div class="line">    &#125;</div><div class="line">.non-height&#123;</div><div class="line">        background: green;</div><div class="line">    &#125;</div><div class="line">.flex&#123;</div><div class="line">        display: flex;</div><div class="line">        flex-direction: column;</div><div class="line">        justify-content: center;</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>场景3：子元素是块级元素且高度已经设定</p>
<p>解法1：</p>
<p>计算子元素的<code>margin-top</code>或<code>margin-bottom</code>，计算方法为父(元素高度-子元素高度)/2</p>
<p>html代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;div class=&quot;wrap &quot;&gt;</div><div class="line">    &lt;div class=&quot;div1 margin&quot;&gt;111111&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<p>css代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">  .wrap&#123;</div><div class="line">            width:200px ;</div><div class="line">            height: 300px;</div><div class="line">            border: 2px solid #ccc;</div><div class="line">            box-sizing: border-box;</div><div class="line">        &#125;</div><div class="line">.div1&#123;</div><div class="line">            width:100px ;</div><div class="line">            height: 100px;</div><div class="line">            box-sizing: border-box;</div><div class="line">            background: darkblue;</div><div class="line">        &#125;</div><div class="line">        .margin&#123;</div><div class="line">          margin-top: 100px;</div><div class="line">        &#125;</div></pre></td></tr></table></figure></p>
<p>解法2：计算父元素的<code>padding-top</code>或<code>padding-bottom</code>，计算方法为(父元素高度-子元素高度)/2</p>
<p>html代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;div class=&quot;wrap  padding&quot;&gt;</div><div class="line">    &lt;div class=&quot;div1 &quot;&gt;111111&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<p>css代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">.wrap&#123;</div><div class="line">        width:200px ;</div><div class="line">        height: 300px;</div><div class="line">        border: 2px solid #ccc;</div><div class="line">        box-sizing: border-box;</div><div class="line">    &#125;</div><div class="line">.padding&#123;</div><div class="line">        padding-top: 100px;</div><div class="line">    &#125;</div><div class="line">.div1&#123;</div><div class="line">        width:100px ;</div><div class="line">        height: 100px;</div><div class="line">        box-sizing: border-box;</div><div class="line">        background: darkblue;</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>解法3：利用绝对定位，让子元素相对于父元素绝对定位</p>
<p>html代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;div class=&quot;wrap  relative&quot;&gt;</div><div class="line">    &lt;div class=&quot;div1 absolute&quot;&gt;111111&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<p>css代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">.relative&#123;</div><div class="line">        position: relative;</div><div class="line">    &#125;</div><div class="line">    .absolute&#123;</div><div class="line">        position: absolute;</div><div class="line">        top:50%;</div><div class="line">        margin-top: -50px;</div><div class="line">    &#125;</div><div class="line">.wrap&#123;</div><div class="line">        width:200px ;</div><div class="line">        height: 300px;</div><div class="line">        border: 2px solid #ccc;</div><div class="line">        box-sizing: border-box;</div><div class="line">    &#125;</div><div class="line">.div1&#123;</div><div class="line">        width:100px ;</div><div class="line">        height: 100px;</div><div class="line">        box-sizing: border-box;</div><div class="line">        background: darkblue;</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>解法4：利用flexbox</p>
<p>html代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;div class=&quot;wrap  flex&quot;&gt;</div><div class="line">    &lt;div class=&quot;div1 &quot;&gt;111111&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<p>css代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">.flex&#123;</div><div class="line">        display: flex;</div><div class="line">        flex-direction: column;</div><div class="line">        justify-content: center;</div><div class="line">    &#125;</div><div class="line">.wrap&#123;</div><div class="line">        width:200px ;</div><div class="line">        height: 300px;</div><div class="line">        border: 2px solid #ccc;</div><div class="line">        box-sizing: border-box;</div><div class="line">    &#125;</div><div class="line">.div1&#123;</div><div class="line">        width:100px ;</div><div class="line">        height: 100px;</div><div class="line">        box-sizing: border-box;</div><div class="line">        background: darkblue;</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>即保证水平居中有保证垂直居中<br>情景一、如果元素宽高确定<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</div><div class="line">&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;</div><div class="line">&lt;title&gt;CSS水平垂直居中&lt;/title&gt;</div><div class="line">&lt;style media=&quot;screen&quot; type=&quot;text/css&quot;&gt;</div><div class="line">.box&#123;</div><div class="line">    position:absolute;</div><div class="line">    top:50%;</div><div class="line">    left:50%;</div><div class="line">    margin:-100px 0 0 -100px;</div><div class="line">    width:200px;</div><div class="line">    height:200px;</div><div class="line">    border:1px solid red;</div><div class="line">&#125;</div><div class="line">&lt;/style&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">    &lt;div class=&quot;box&quot;&gt;123412341241241234124&lt;/div&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure></p>
<p>情景二如果元素仅知道宽，不确定高<br>html代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;div class=&quot;wrap table-cell&quot;&gt;</div><div class="line">    &lt;div class=&quot;non-height &quot;&gt;11111&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<p>css代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">.table-cell&#123;</div><div class="line">            display: table-cell;</div><div class="line">            vertical-align: middle;</div><div class="line">        &#125;</div><div class="line">.non-height&#123;</div><div class="line">            background: green;</div><div class="line">        &#125;</div><div class="line">.wrap&#123;</div><div class="line">            width:200px ;</div><div class="line">            height: 300px;</div><div class="line">            border: 2px solid #ccc;</div><div class="line">            box-sizing: border-box;</div><div class="line">        &#125;</div></pre></td></tr></table></figure></p>
<h2 id="两列布局"><a href="#两列布局" class="headerlink" title="两列布局"></a>两列布局</h2><p>情景一、左列定宽，右列自适应<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html&gt;</div><div class="line">    &lt;head&gt;</div><div class="line">        &lt;meta charset=&quot;utf-8&quot;&gt;</div><div class="line">        &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge,chrome=1&quot;&gt;</div><div class="line">	    &lt;title&gt;CSS布局&lt;/title&gt;</div><div class="line">        &lt;style&gt;</div><div class="line">            body &#123;</div><div class="line">                background-color: #ffffff; </div><div class="line">                font-size:14px;</div><div class="line">                &#125;</div><div class="line">            #hd, #ft &#123;</div><div class="line">                padding:20px 3px; </div><div class="line">                background-color: #cccccc; </div><div class="line">                text-align: center;</div><div class="line">                border:solid 1px #e4e4e4;</div><div class="line">                &#125;</div><div class="line">            /*对所有的类型都定义页面最小宽度为400px*/</div><div class="line">            .bd-lft, .bd-rgt, .bd-3-lr, .bd-3-ll, .bd-3-rr &#123;</div><div class="line">                margin:10px 0; </div><div class="line">                min-width:400px;</div><div class="line">                &#125;</div><div class="line">            .main &#123;</div><div class="line">                background-color: #03a9f4; </div><div class="line">                color:#ffffff;</div><div class="line">                &#125;</div><div class="line">            .aside, .aside-1, .aside-2 &#123;</div><div class="line">                background-color: #00bcd4; </div><div class="line">                color:#ffffff;</div><div class="line">                &#125;</div><div class="line">            p &#123;</div><div class="line">                margin:0; </div><div class="line">                padding:20px; </div><div class="line">                text-align: center;</div><div class="line">                &#125;</div><div class="line">            /* 两列布局之 左侧栏固定宽度，右侧自适应 */</div><div class="line">            .bd-lft&#123;</div><div class="line">                zoom:1;</div><div class="line">                overflow:hidden;</div><div class="line">                padding-left:210px;</div><div class="line">            &#125;</div><div class="line">            .bd-lft .main&#123;</div><div class="line">                width:100%;</div><div class="line">                float:left;</div><div class="line">            &#125;</div><div class="line">            .bd-lft .aside&#123;</div><div class="line">                float:left;</div><div class="line">                position:relative;</div><div class="line">                left:-210px;</div><div class="line">                margin-left:-100%;</div><div class="line">                width:200px;</div><div class="line">                _left: 0; /*IE6 hack*/</div><div class="line">            &#125;</div><div class="line">            </div><div class="line">        &lt;/style&gt;</div><div class="line">    &lt;/head&gt;</div><div class="line">    &lt;body&gt;</div><div class="line">        &lt;div id=&quot;hd&quot;&gt;头部&lt;/div&gt;</div><div class="line">        &lt;!--两列布局之 左侧栏固定宽度，右侧自适应--&gt;</div><div class="line">        &lt;div class=&quot;bd-lft&quot;&gt;</div><div class="line">            &lt;div class=&quot;main&quot;&gt;&lt;p&gt;右边－自适应&lt;/p&gt;&lt;/div&gt;</div><div class="line">            &lt;div class=&quot;aside&quot;&gt;&lt;p&gt;左边固定宽度&lt;/p&gt;&lt;/div&gt;</div><div class="line">        &lt;/div&gt;</div><div class="line">        &lt;div id=&quot;ft&quot;&gt;底部&lt;/div&gt;</div><div class="line">    &lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure></p>
<p>情景二、两列布局之左侧自适应，右侧固定宽度<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">	&lt;meta charset=&quot;utf-8&quot;&gt;</div><div class="line">	&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge,chrome=1&quot;&gt;</div><div class="line">	&lt;title&gt;圣杯布局&lt;/title&gt;</div><div class="line">	&lt;style type=&quot;text/css&quot;&gt;</div><div class="line">	body &#123;</div><div class="line">        background-color: #ffffff; </div><div class="line">        font-size:14px;</div><div class="line">        &#125;</div><div class="line">	#hd, #ft &#123;</div><div class="line">        padding:20px 3px; </div><div class="line">        background-color: #cccccc; </div><div class="line">        text-align: center;</div><div class="line">        &#125;</div><div class="line">	.bd-lft, .bd-rgt, .bd-3-lr, .bd-3-ll, .bd-3-rr &#123;</div><div class="line">        margin:10px 0; </div><div class="line">        min-width:400px;</div><div class="line">        &#125;</div><div class="line">	.main &#123;</div><div class="line">        background-color: #03a9f4; </div><div class="line">        color:#ffffff;</div><div class="line">        &#125;</div><div class="line">	.aside, .aside-1, .aside-2 &#123;</div><div class="line">        background-color: #00bcd4; </div><div class="line">        color:#ffffff;</div><div class="line">        &#125;</div><div class="line">	p &#123;</div><div class="line">        margin:0; </div><div class="line">        padding:20px; </div><div class="line">        text-align: center;</div><div class="line">        &#125;</div><div class="line">	/* 左侧栏固定宽度，右侧自适应 */</div><div class="line">	.bd-lft &#123;</div><div class="line">	    zoom:1;</div><div class="line">	    overflow:hidden;</div><div class="line">	    padding-left:210px;</div><div class="line">	&#125;</div><div class="line">	.bd-lft .aside &#123;</div><div class="line">	    float:left;</div><div class="line">	    width:200px;</div><div class="line">	    margin-left:-100%; /*= -100%*/</div><div class="line">	    position:relative;</div><div class="line">	    left:-210px; /* = -parantNode.paddingLeft */</div><div class="line">	    _left: 0; /*IE6 hack*/</div><div class="line">	&#125;</div><div class="line">	.bd-lft .main &#123;</div><div class="line">	    float:left;</div><div class="line">	    width:100%;</div><div class="line">	&#125;</div><div class="line"></div><div class="line"></div><div class="line">	/* 右侧栏固定宽度，左侧自适应 */</div><div class="line">	.bd-rgt &#123;</div><div class="line">	    zoom:1;</div><div class="line">	    overflow:hidden;</div><div class="line">	    padding-right:210px;</div><div class="line">	&#125;</div><div class="line">	.bd-rgt .aside &#123;</div><div class="line">	    float:left;</div><div class="line">	    width:200px;</div><div class="line">		margin-left:-200px; /* = -this.width */</div><div class="line">	    position:relative;</div><div class="line">	    right:-210px; /* = -parantNode.paddingRight */</div><div class="line">	&#125;</div><div class="line">	.bd-rgt .main &#123;</div><div class="line">	    float:left;</div><div class="line">	    width:100%;</div><div class="line">	&#125;</div><div class="line"></div><div class="line"></div><div class="line">	/* 左中右 三栏自适应 */</div><div class="line">	.bd-3-lr &#123;</div><div class="line">	    zoom:1;</div><div class="line">	    overflow:hidden;</div><div class="line">	    padding-left:210px;</div><div class="line">	    padding-right:210px;</div><div class="line">	&#125;</div><div class="line">	.bd-3-lr .main &#123;</div><div class="line">		float:left;</div><div class="line">	    width:100%;</div><div class="line">	&#125;</div><div class="line">	.bd-3-lr .aside-1 &#123;</div><div class="line">		float: left;</div><div class="line">		width:200px;</div><div class="line">		margin-left: -100%;</div><div class="line"></div><div class="line">		position:relative;</div><div class="line">		left: -210px;</div><div class="line">		_left: 210px; /*IE6 hack*/</div><div class="line">	&#125;</div><div class="line">	.bd-3-lr .aside-2 &#123;</div><div class="line">		float: left;</div><div class="line">		width:200px;</div><div class="line">		margin-left: -200px;</div><div class="line"></div><div class="line">		position:relative;</div><div class="line">		right: -210px;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	/* 都在左边，右侧自适应 */</div><div class="line">	.bd-3-ll &#123;</div><div class="line">	    zoom:1;</div><div class="line">	    overflow:hidden;</div><div class="line">	    padding-left:420px;</div><div class="line">	&#125;</div><div class="line">	.bd-3-ll .main &#123;</div><div class="line">		float:left;</div><div class="line">	    width:100%;</div><div class="line">	&#125;</div><div class="line">	.bd-3-ll .aside-1 &#123;</div><div class="line">		float: left;</div><div class="line">		width:200px;</div><div class="line">		margin-left: -100%;</div><div class="line"></div><div class="line">		position:relative;</div><div class="line">		left: -420px;</div><div class="line">		_left: 0px; /*IE6 hack*/</div><div class="line">	&#125;</div><div class="line">	.bd-3-ll .aside-2 &#123;</div><div class="line">		float: left;</div><div class="line">		width:200px;</div><div class="line">		margin-left: -100%;</div><div class="line"></div><div class="line">		position:relative;</div><div class="line">		left: -210px;</div><div class="line">		_left: 210px; /*IE6 hack*/</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	/* 都在右边，左侧自适应 */</div><div class="line">	.bd-3-rr &#123;</div><div class="line">	    zoom:1;</div><div class="line">	    overflow:hidden;</div><div class="line">	    padding-right:420px;</div><div class="line">	&#125;</div><div class="line">	.bd-3-rr .main &#123;</div><div class="line">		float:left;</div><div class="line">	    width:100%;</div><div class="line">	&#125;</div><div class="line">	.bd-3-rr .aside-1 &#123;</div><div class="line">		float: left;</div><div class="line">		width:200px;</div><div class="line">		margin-left: -200px;</div><div class="line"></div><div class="line">		position:relative;</div><div class="line">		right: -210px;</div><div class="line">	&#125;</div><div class="line">	.bd-3-rr .aside-2 &#123;</div><div class="line">		float: left;</div><div class="line">		width:200px;</div><div class="line">		margin-left: -200px;</div><div class="line"></div><div class="line">		position:relative;</div><div class="line">		right: -420px;</div><div class="line">	&#125;</div><div class="line">	&lt;/style&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">	&lt;div id=&quot;hd&quot;&gt;头部&lt;/div&gt;</div><div class="line">	&lt;div class=&quot;bd-lft&quot;&gt;</div><div class="line">		&lt;div class=&quot;main&quot;&gt;</div><div class="line">			&lt;p&gt;主内容栏自适应宽度&lt;/p&gt;</div><div class="line">		&lt;/div&gt;</div><div class="line">		&lt;div class=&quot;aside&quot;&gt;</div><div class="line">			&lt;p&gt;侧边栏固定宽度&lt;/p&gt;</div><div class="line">		&lt;/div&gt;</div><div class="line">	&lt;/div&gt;</div><div class="line"></div><div class="line"></div><div class="line">	&lt;div class=&quot;bd-rgt&quot;&gt;</div><div class="line">		&lt;div class=&quot;main&quot;&gt;</div><div class="line">			&lt;p&gt;主内容栏自适应宽度&lt;/p&gt;</div><div class="line">		&lt;/div&gt;</div><div class="line"></div><div class="line">		&lt;div class=&quot;aside&quot;&gt;</div><div class="line">			&lt;p&gt;侧边栏固定宽度&lt;/p&gt;</div><div class="line">		&lt;/div&gt;</div><div class="line">	&lt;/div&gt;</div><div class="line"></div><div class="line">	&lt;div class=&quot;bd-3-lr&quot;&gt;</div><div class="line">		&lt;div class=&quot;main&quot;&gt;</div><div class="line">			&lt;p&gt;主内容栏自适应宽度&lt;/p&gt;</div><div class="line">		&lt;/div&gt;</div><div class="line"></div><div class="line">		&lt;div class=&quot;aside-1&quot;&gt;</div><div class="line">			&lt;p&gt;侧边栏1固定宽度&lt;/p&gt;</div><div class="line">		&lt;/div&gt;</div><div class="line"></div><div class="line">		&lt;div class=&quot;aside-2&quot;&gt;</div><div class="line">			&lt;p&gt;侧边栏2固定宽度&lt;/p&gt;</div><div class="line">		&lt;/div&gt;</div><div class="line">	&lt;/div&gt;</div><div class="line"></div><div class="line">	&lt;div class=&quot;bd-3-ll&quot;&gt;</div><div class="line">		&lt;div class=&quot;main&quot;&gt;</div><div class="line">			&lt;p&gt;主内容栏自适应宽度&lt;/p&gt;</div><div class="line">		&lt;/div&gt;</div><div class="line"></div><div class="line">		&lt;div class=&quot;aside-1&quot;&gt;</div><div class="line">			&lt;p&gt;侧边栏1固定宽度&lt;/p&gt;</div><div class="line">		&lt;/div&gt;</div><div class="line"></div><div class="line">		&lt;div class=&quot;aside-2&quot;&gt;</div><div class="line">			&lt;p&gt;侧边栏2固定宽度&lt;/p&gt;</div><div class="line">		&lt;/div&gt;</div><div class="line">	&lt;/div&gt;</div><div class="line"></div><div class="line">	&lt;div class=&quot;bd-3-rr&quot;&gt;</div><div class="line">		&lt;div class=&quot;main&quot;&gt;</div><div class="line">			&lt;p&gt;侧边栏2固定宽度侧边栏2固定宽度侧边栏2固定宽度&lt;/p&gt;</div><div class="line">		&lt;/div&gt;</div><div class="line"></div><div class="line">		&lt;div class=&quot;aside-1&quot;&gt;</div><div class="line">			&lt;p&gt;侧边栏1固定宽度&lt;/p&gt;</div><div class="line">		&lt;/div&gt;</div><div class="line"></div><div class="line">		&lt;div class=&quot;aside-2&quot;&gt;</div><div class="line">			&lt;p&gt;侧边栏2固定宽度&lt;/p&gt;</div><div class="line">		&lt;/div&gt;</div><div class="line">	&lt;/div&gt;</div><div class="line">	</div><div class="line">	&lt;div id=&quot;ft&quot;&gt;底部&lt;/div&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure></p>
<p>##三列布局</p>
<p>见<strong>圣杯布局详解（翻译）、双飞翼布局详解</strong></p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/02/04/CSS常用布局/" class="archive-article-date">
  	<time datetime="2017-02-04T14:41:00.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-02-04</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/css/">css</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/学习/">学习</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/布局/">布局</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>












  
    <article id="post-圣杯布局详解（翻译）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/04/圣杯布局详解（翻译）/">圣杯布局详解（翻译）、双飞翼布局详解</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="圣杯布局详解"><a href="#圣杯布局详解" class="headerlink" title="圣杯布局详解"></a>圣杯布局详解</h1><blockquote>
<p>在前端一直写javascript，后来因为自己的小项目，要自己进行页面布局了，为了能够自适应，顺便探讨一下经典的css布局，根据大家的推荐，就找到了经典的<strong><em>圣杯布局</em></strong>和<strong><em>双飞翼布局</em></strong>。本文关于圣杯布局的部分都是翻译过来的，其中部分内容经过自己的理解稍加补充，最后的双飞翼布局部分是自己整理的。<br>原文：<br>by <strong><a href="http://alistapart.com/author/matthewlevine" target="_blank" rel="external">Matthew Levine</a></strong> January 30, 2006<br>原文地址：<a href="http://alistapart.com/article/holygrail" target="_blank" rel="external">http://alistapart.com/article/holygrail</a><br><br><br><strong>真的不是我命名的，这让我感到非常抱歉，我并不想用这个名字来强调其重要性，或者为了贬低那个宗教中的具有特殊含义的“圣杯”。</strong><br><br><br>但是这个称呼已经在这里了，而且我们都知道它指的是什么。<br><br><br>我们常常需要三列来布局一个网页。固定宽度的一列用来展示导航，另外一列，同样也是固定宽度的，用来投放Google广告或者照片，同时能够自适应宽度的中间列来展示主要内容。这博客的黄金时代，该布局的广泛使用和其不好理解的原理，为其赢的了“圣杯布局”的名称！<br><br><br>已经有很多文章探讨了这个话题，也有一些好的模版早已出现了。然而，所有已经存在的方案都会涉及到一些牺牲：</p>
<ol>
<li><a href="http://www.manisheriar.com/holygrail/index.htm" target="_blank" rel="external">正确的原代码加载顺序</a></li>
<li><a href="http://glish.com/css/7.asp" target="_blank" rel="external">100%宽度的底部</a></li>
<li>精益标记经常会在追求这种难以琢磨的布局中被妥协</li>
</ol>
<p>关于上面的几个准则，第一点，在浏览器对dom结构进行解析时，可以通过设置，使浏览器不用完全下载整个dom结构就可以先展示部分内容，而对于博客来说，我们通常希望用户可以最先看到中间的内容 </p>
</blockquote>
<p><br><br>最近的一个项目使我个人希望的圣杯布局得以实现。我将想你介绍的技术，不仅能够让你实现圣杯布局，还不回影响代码的灵活性，它包涵一下特性：</p>
<ol>
<li>拥有一个自适应宽度的中间列，两个固定宽度的列位于左右</li>
<li>让中间列在源代码中首先展示</li>
<li>允许任意列拥有最大高度</li>
<li>只需要一个额外的 div 标记，并且</li>
<li>拥有最简单的css代码和最小的css兼容性代码</li>
</ol>
<h2 id="站在巨人肩上"><a href="#站在巨人肩上" class="headerlink" title="站在巨人肩上"></a>站在巨人肩上</h2><p>在这里展示的技术受到了Alex Robinson撰写的<em>One True Layout</em>这篇文章的启发。 Alex在他的文章中已经标明了圣杯方法的问题，但是他的处理方式需要两个wrappers并且在没有没有额外的divs时，padding会变得很困难。<br><br><br>另一个指引来自Eric Meyer的改进，它使用定位来混合多个单元类型。他的例子也产生了具有固定侧边栏和自适应中间列的三栏布局。不幸的是，它依赖于近似百分比的方式填充视口的一部分，其随着不同的屏幕分辨率而变化。</p>
<h2 id="接下来，我们看代码"><a href="#接下来，我们看代码" class="headerlink" title="接下来，我们看代码"></a>接下来，我们看代码</h2><p>所需要的html结构和元素。<br>（为了更好的描述这个技术，我们特意使用了非语意的id,如”center”,”left”,”right”。在实际项目中，我们建议你使用语义化的ids。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;div id=&quot;header&quot;&gt;&lt;/div&gt;</div><div class="line">&lt;div id=&quot;container&quot;&gt;</div><div class="line">  &lt;div id=&quot;center&quot; class=&quot;column&quot;&gt;&lt;/div&gt;</div><div class="line">  &lt;div id=&quot;left&quot; class=&quot;column&quot;&gt;&lt;/div&gt;</div><div class="line">  &lt;div id=&quot;right&quot; class=&quot;column&quot;&gt;&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">&lt;div id=&quot;footer&quot;&gt;&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<p>这就足够了。一个单独、额外的div用来包裹你所需要的所有列；这甚至满足了我强迫症似的标记习惯。<br><br><br>样式表也很简单。假设你需要一个固定宽度为200px的左边栏，一个固定宽度为150px的右边栏。为了简化描述，我将左边，右边，中间分别缩写为LC,RC,CC。基本的CSS样式如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">body &#123;</div><div class="line">  min-width: 550px;      /* 2x LC width + RC width */</div><div class="line">&#125;</div><div class="line">#container &#123;</div><div class="line">  padding-left: 200px;   /* LC width */</div><div class="line">  padding-right: 150px;  /* RC width */</div><div class="line">&#125;</div><div class="line">#container .column &#123;</div><div class="line">  position: relative;</div><div class="line">  float: left;</div><div class="line">&#125;</div><div class="line">#center &#123;</div><div class="line">  width: 100%;</div><div class="line">&#125;</div><div class="line">#left &#123;</div><div class="line">  width: 200px;          /* LC width */</div><div class="line">  right: 200px;          /* LC width */</div><div class="line">  margin-left: -100%;</div><div class="line">&#125;</div><div class="line">#right &#123;</div><div class="line">  width: 150px;          /* RC width */</div><div class="line">  margin-right: -150px;  /* RC width */</div><div class="line">&#125;</div><div class="line">#footer &#123;</div><div class="line">  clear: both;</div><div class="line">&#125;</div><div class="line">/*** IE6 Fix ***/</div><div class="line">* html #left &#123;</div><div class="line">  left: 150px;           /* RC width */</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>简单的将这些值替换为你自己的尺寸，就成了你自己的圣杯布局。这个技术在所有现代浏览器中都有效，包括Safari, Opera, Firefox, 和(需要最后一行CSShack) IE6.IE5.5支持需要至少一个盒子模型hack，这是一个练习留给读者。</p>
<blockquote>
<p>根据现在【2017年】的浏览器市场，可以不用考虑IE6的情况了。</p>
</blockquote>
<p>现在，可以详细理解并欣赏这种布局的优雅。</p>
<h2 id="原理详解"><a href="#原理详解" class="headerlink" title="原理详解"></a>原理详解</h2><p>该方法很简单。container div拥有一个自适应的中间列和固定宽度的左右内边距。诀窍就是让左侧的div占据<strong>左侧的内边距</strong>的位置，右侧div占据<strong>右侧内边距</strong>的位置，使中间列可以自适应container的宽度。<br>现在，我们来一步一步的实现。</p>
<p>第一步，创建页面框架<br>创建头部，底部和container容器。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;div id=&quot;header&quot;&gt;&lt;/div&gt;</div><div class="line">&lt;div id=&quot;container&quot;&gt;&lt;/div&gt;</div><div class="line">&lt;div id=&quot;footer&quot;&gt;&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<p>根据我们所需要的左右栏宽度为container容器设置左右内边距。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#container &#123;</div><div class="line">  padding-left: 200px;   /* LC width */</div><div class="line">  padding-right: 150px;  /* RC width */</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>现在，我们的布局如下图：<br><img src="/css001.gif" alt=""></p>
<div align="center">Step 1: Create the frame</div>

<p>第二步，增加列<br>我们已经有了基本的架构，现在将关注列。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;div id=&quot;header&quot;&gt;&lt;/div&gt;&lt;div id=&quot;container&quot;&gt;</div><div class="line">  &lt;div id=&quot;center&quot; class=&quot;column&quot;&gt;&lt;/div&gt;</div><div class="line">  &lt;div id=&quot;left&quot; class=&quot;column&quot;&gt;&lt;/div&gt;</div><div class="line">  &lt;div id=&quot;right&quot; class=&quot;column&quot;&gt;&lt;/div&gt;</div><div class="line">&lt;/div&gt;&lt;div id=&quot;footer&quot;&gt;&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<p>接下来，我们增加合适的宽度，并且将他们放到同一行。<strong>并设置中、左、右三栏都向左浮动</strong>。我们还需要清除footer的浮动。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">#container .column &#123;</div><div class="line">  float: left;</div><div class="line">&#125;</div><div class="line">#center &#123;</div><div class="line">  width: 100%;</div><div class="line">&#125;</div><div class="line">#left &#123;</div><div class="line">  width: 200px;  /* LC width */</div><div class="line">&#125;</div><div class="line">#right &#123;</div><div class="line">  width: 150px;  /* RC width */</div><div class="line">&#125;</div><div class="line">#footer &#123;</div><div class="line">  clear: both;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>注意中间列的100%宽度指的是容器container的宽度，并且不包括容器的左右内边距。稍候我们将再次看到100%的宽度，它仍然指的是容器container代表的中间列宽度。<br>现在需要使列整齐排列在一行，但是因为中间列占据了100%的可用宽度，所以左右列都排列到了下一行。如图：</p>
<blockquote>
<p>关于宽度100%，因为container设置了左右内边距，而在标准的dom盒模型中，宽度不包含内边距。</p>
</blockquote>
<p><img src="/css002.gif" alt=""></p>
<div align="center">Step 2: Add the columns</div>

<p>第三步、将左边栏放到合适的位置<br>所剩下的就是使左、右两列分别位于容器container的左、右内边距中，从而使所有的列位于同一行。中间列的位置现在已经如我们期望的那样，所以我们仅需要关注左边栏和右边栏。</p>
<p>将左边栏放到合适的位置需要两步。首先，我们将对其设置-100%宽度的左外边距。<strong>记住，这个100%指的是中间列的宽度，也就是去掉左右内边距后容器container的宽度。</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#left &#123;</div><div class="line">  width: 200px;        /* LC width */</div><div class="line">  margin-left: -100%;  </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>现在左边栏位于中间列的左侧，并且遮挡了中间列的左侧。右边栏浮动到了第二行的左边。如下图：</p>
<blockquote>
<p>因为我们对三列都设置了向左的浮动，当对左边栏再设置 margin-left: -100%时，我们实际上是将其左边框的位置向左移动了整个中间列的宽度。</p>
</blockquote>
<p><img src="/css003.gif" alt=""></p>
<div align="center">Step 3: Pull the left column into place—halfway there</div><br>为了将左边栏放到容器左内边距中，我们将使用相对定位，使左边栏向左偏移自身列宽。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">#container .columns &#123;</div><div class="line">  float: left;</div><div class="line">  position: relative;</div><div class="line">&#125;</div><div class="line">#left &#123;</div><div class="line">  width: 200px;        /* LC width */</div><div class="line">  margin-left: -100%;  </div><div class="line">  left: -200px;        /* LC width */</div><div class="line">&#125;</div></pre></td></tr></table></figure><br><br><code>left:-200px;</code>的设定，可以将左边栏移动到容器的左边。现在左边栏已经完美展现了。<br><img src="/css004.gif" alt=""><br><div align="center"> Step 3: Left column pulled into place</div>

<p>第四步、将右边栏放到合适的位置<br>现在，唯一未解决的问题就是要将右边栏放到合适的位置。为了实现这个，我们仅需要将其放到container的右内边距中。我们将再次使用margin负值。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#right &#123;</div><div class="line">  width: 150px;          /* RC width */</div><div class="line">  margin-right: -150px;  /* RC width */</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>现在所有的都被完成了，我们发现包裹的左右两侧的内边距也消失了。</p>
<p><img src="/css005.gif" alt=""></p>
<p>第五步、涉及防御<br>如果浏览器的窗口大小改变，中间列的宽度也会随之改变。当中间列比左边列宽还小时，布局就混乱了。在body上设置一个 min-width 可以使布局不回混乱。因为IE6不回出现改问题，所以即使它不支持min-width也不是一个问题。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">body &#123;</div><div class="line">  min-width: 550px;  /* 2x LC width + RC width */</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>当然，没有任何布局技术在IE中不是用使用特定方法就能够变得完美。在IE6中margin负值将左边栏拉的太远了。关于IE兼容行问题，稍候在详细分析。我们此处为了将左边栏拉回到合理的位置，给他添加了一个hack。代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">* html #left &#123;</div><div class="line">  left: 150px;  /* RC width */</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>关于IE中 为什么使用右边栏的宽度来进行hack,涉及到一点儿代数。我就不用详细的细节来扰乱你了；你可以自己来解决这个问题，或者将其认为是IE的另一个特性。</p>
<p>##请使用内边距<br>我不是一个设计师，但是看看上面的代码,严重影响到了我们的审美感。连接到一起的列很难看而且使内容难以阅读。所以，我们需要间隙。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">#left &#123;</div><div class="line">  width: 180px;        /* LC fullwidth - padding */</div><div class="line">  padding: 0 10px;</div><div class="line">  right: 200px;        /* LC fullwidth */</div><div class="line">  margin-left: -100%;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>给中间列添加内边距需要一些技巧，但是不需要更多标签，仅仅需要添加一些样式。</p>
<p>填充加上100％的宽度导致中心列扩展超过容器的非填充宽度。为了将其调回到原位，我们需要增加右边距填充的总量。 这确保中心列只有我们预期的那么大。<br>为了做到这一点，我将修改这个例子，为每一侧列添加一个10像素的填充（共20个像素），在中心的每一边添加一个20像素的填充（总共40像素 ）。 新的CSS看起来像这样：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">body &#123;</div><div class="line">  min-width: 630px;      /* 2x (LC fullwidth +</div><div class="line">                            CC padding) + RC fullwidth */</div><div class="line">&#125;</div><div class="line">#container &#123;</div><div class="line">  padding-left: 200px;   /* LC fullwidth */</div><div class="line">  padding-right: 190px;  /* RC fullwidth + CC padding */</div><div class="line">&#125;</div><div class="line">#container .column &#123;</div><div class="line">  position: relative;</div><div class="line">  float: left;</div><div class="line">&#125;</div><div class="line">#center &#123;</div><div class="line">  padding: 10px 20px;    /* CC padding */</div><div class="line">  width: 100%;</div><div class="line">&#125;</div><div class="line">#left &#123;</div><div class="line">  width: 180px;          /* LC width */</div><div class="line">  padding: 0 10px;       /* LC padding */</div><div class="line">  right: 240px;          /* LC fullwidth + CC padding */</div><div class="line">  margin-left: -100%;</div><div class="line">&#125;</div><div class="line">#right &#123;</div><div class="line">  width: 130px;          /* RC width */</div><div class="line">  padding: 0 10px;       /* RC padding */</div><div class="line">  margin-right: -190px;  /* RC fullwidth + CC padding */</div><div class="line">&#125;</div><div class="line">#footer &#123;</div><div class="line">  clear: both;</div><div class="line">&#125;/*** IE Fix ***/</div><div class="line">* html #left &#123;</div><div class="line">  left: 150px;           /* RC fullwidth */</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="使三列等高"><a href="#使三列等高" class="headerlink" title="使三列等高"></a>使三列等高</h2><p>只要再使三列等高，这个技术就完美了。我使用的是<em><a href="http://www.positioniseverything.net/articles/onetruelayout/equalheight" target="_blank" rel="external">One True Layout</a></em>里面讲到的技术，这里就不详细介绍了。为了实现这个，你仅需要添加下面的CSS:</p>
<blockquote>
<p>使三列等高主要是处理三栏的背景，通常如果一栏的内容很高，其外的两栏因高度不够，会出现背景不足的情况。使用巨大数值的padding-bottom值，然后再使用负的margin-bottom值抵消设置的padding-bottom值。这里使用了内边距有背景，而外边距没有背景的特性。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">#container &#123;</div><div class="line">  overflow: hidden;</div><div class="line">&#125;</div><div class="line">#container .column &#123;</div><div class="line">  padding-bottom: 20010px;  /* X + padding-bottom */</div><div class="line">  margin-bottom: -20000px;  /* X */</div><div class="line">&#125;</div><div class="line">#footer &#123;</div><div class="line">  position: relative;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这里，我给所有的列增加了一个额外的10px的底部内边距。<br>需要注意的是，Opera 8在使用overflow时有一个bug:（目前该版本浏览器已经很少见了）</p>
<p>此布局独有的另一个问题是IE不会在容器底部剪切列背景。如果页面不像视口一样高，它们会溢出页脚。 如果你没有底部，或者你的页面足够高，以确保你总是占据整个视口，这也就不是一个问题。</p>
<p>但是如果你需要一个单独的底部，也不用担心，你可以使用下面的方法来处理。将底部包裹起来<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;div id=&quot;footer-wrapper&quot;&gt;</div><div class="line">  &lt;div id=&quot;footer&quot;&gt;&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<p>现在使用和等高列同样的技巧将底部增加到页面中，接下来你就可以根据自己的需要来设置底部了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">* html body &#123;</div><div class="line">  overflow: hidden;</div><div class="line">&#125;</div><div class="line">* html #footer-wrapper &#123;</div><div class="line">  float: left;</div><div class="line">  position: relative;</div><div class="line">  width: 100%;</div><div class="line">  padding-bottom: 10010px;</div><div class="line">  margin-bottom: -10000px;</div><div class="line">  background: #fff;         /* Same as body </div><div class="line">                               background */</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>PS:此处我在ie11下模拟了ie7发现布局也出现的问题。如果在实际项目中要处理ie6的兼容性，我建议去看下原文。此处我仅给出最终的兼容ie7、ie+的代码，另外文章中所提到的opara8的问题，我也没有找到对应版本的浏览器，我在最新的opara浏览器中进行了验证（国内该浏览器的早起版本很少）。<br>一下的圣杯布局特性除了文章前面讲到的那些外，还能够保持各个列的高度一致。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html&gt;</div><div class="line">    &lt;head&gt;</div><div class="line">        &lt;meta charset=&quot;utf-8&quot;&gt;</div><div class="line">        &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge,chrome=1&quot;&gt;</div><div class="line">        &lt;title&gt;CSS布局&lt;/title&gt;</div><div class="line">        &lt;style&gt;</div><div class="line">            *&#123;</div><div class="line">                margin: 0;</div><div class="line">                padding: 0;</div><div class="line">            &#125;</div><div class="line">           body &#123;</div><div class="line">            min-width: 550px;</div><div class="line">            &#125;</div><div class="line">            #container &#123;</div><div class="line">            padding-left: 200px;   /* LC width */</div><div class="line">            padding-right: 150px;  /* RC width */</div><div class="line">            &#125;</div><div class="line">            #container &#123;</div><div class="line">            overflow: hidden;</div><div class="line">            &#125;</div><div class="line">            #container .column &#123;</div><div class="line">            padding-bottom: 510px;</div><div class="line">            margin-bottom: -500px;</div><div class="line">            &#125;</div><div class="line">            #header&#123;</div><div class="line">                background: greenyellow;</div><div class="line">            &#125;</div><div class="line">            #footer &#123;</div><div class="line">            position: relative;</div><div class="line">            background: greenyellow;</div><div class="line">&#125;</div><div class="line">            #container .column &#123;</div><div class="line">            position: relative;</div><div class="line">            float: left;</div><div class="line">            min-height: 130px;</div><div class="line">            &#125;</div><div class="line">            #center &#123;</div><div class="line">            width: 100%;</div><div class="line">            background: blue;</div><div class="line">            &#125;</div><div class="line">            #left &#123;</div><div class="line">                width: 200px;          /* LC width */</div><div class="line">                left: -200px;          /* LC width */</div><div class="line">                margin-left: -100%;</div><div class="line">                background: red;</div><div class="line">                *left: 150px;</div><div class="line">            &#125;</div><div class="line">            #right &#123;</div><div class="line">                width: 150px;          /* RC width */</div><div class="line">                margin-right: -150px;  /* RC width */</div><div class="line">                background: red;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            #footer-wrapper&#123;</div><div class="line">                float: left;</div><div class="line">                position:relative;</div><div class="line">                width:100%;</div><div class="line">                padding-bottom: 510px;</div><div class="line">                margin-bottom: -500px;</div><div class="line">                background: #fff;</div><div class="line">            &#125;</div><div class="line">        &lt;/style&gt;</div><div class="line">    &lt;/head&gt;</div><div class="line">    &lt;body&gt;</div><div class="line">        &lt;div id=&quot;header&quot;&gt;header&lt;/div&gt;</div><div class="line">        &lt;div id=&quot;container&quot;&gt;</div><div class="line">            &lt;div id=&quot;center&quot; class=&quot;column&quot;&gt;&lt;/div&gt;</div><div class="line">            &lt;div id=&quot;left&quot; class=&quot;column&quot;&gt;左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏左边栏&lt;/div&gt;</div><div class="line">            &lt;div id=&quot;right&quot; class=&quot;column&quot;&gt;&lt;/div&gt;</div><div class="line">        &lt;/div&gt;</div><div class="line">        &lt;div id=&quot;footer-wrapper&quot;&gt;</div><div class="line">            &lt;div id=&quot;footer&quot;&gt;</div><div class="line">                footer</div><div class="line">            &lt;/div&gt;</div><div class="line">        &lt;/div&gt;</div><div class="line">    &lt;/body&gt;</div><div class="line">&lt;div&gt;</div></pre></td></tr></table></figure></p>
<h3 id="淘宝双飞翼布局"><a href="#淘宝双飞翼布局" class="headerlink" title="淘宝双飞翼布局"></a>淘宝双飞翼布局</h3><p>圣杯布局引入中国后，被淘宝大神玉伯改进出了双飞翼布局.<br>相比于圣杯布局，双飞翼布局要更容易理解，而且没有使用到相对定位等特性，在国内收到很大欢迎。<br>在具体实现上，整体思路和圣杯布局一样，使用的dom结构的唯一差别就是中间列用一个div包裹起来。在中间列内部通过设置左右外边距来预留出两侧边栏的位置，所以称之为“双飞翼”，再使用外边距负值法将左右边栏放置到预留出的位置。因为在处理过程中，没有使用相对定位，理解起来也更容易。最终代码看起来很清晰简洁。<br>代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html&gt;</div><div class="line">    &lt;head&gt;</div><div class="line">        &lt;meta charset=&quot;utf-8&quot;&gt;</div><div class="line">        &lt;title&gt;淘宝双飞翼布局&lt;/title&gt;</div><div class="line">        &lt;style&gt;</div><div class="line">            .container&#123;</div><div class="line">                width:100%;</div><div class="line">                margin:10 auto;</div><div class="line">            &#125;</div><div class="line">            .container .col-main&#123;</div><div class="line">                float: left;</div><div class="line">                width:100%;</div><div class="line">            &#125;</div><div class="line">            .container .col-main .main-wrap&#123;</div><div class="line">                margin-left:200px;</div><div class="line">                margin-right:140px;</div><div class="line">                background: lawngreen;</div><div class="line">                min-height:130px;</div><div class="line">            &#125;</div><div class="line">            .container .col-sub&#123;</div><div class="line">                width:200px;</div><div class="line">                float:left;</div><div class="line">                margin-left:-100%;</div><div class="line">                background: #ff0;</div><div class="line">                min-height:130px;</div><div class="line">            &#125;</div><div class="line">            .container .col-extra&#123;</div><div class="line">                width:140px;</div><div class="line">                float:left;</div><div class="line">                margin-left:-140px;</div><div class="line">                background: #ff0;</div><div class="line">                min-height:130px;</div><div class="line">            &#125;</div><div class="line">        &lt;/style&gt;</div><div class="line">    &lt;/head&gt;</div><div class="line">    &lt;body&gt;</div><div class="line">        &lt;div class=&quot;container&quot;&gt;</div><div class="line">            &lt;div class=&quot;col-main&quot;&gt;</div><div class="line">                &lt;div class=&quot;main-wrap&quot;&gt;</div><div class="line">                    我是主元素</div><div class="line">                &lt;/div&gt;</div><div class="line">            &lt;/div&gt;</div><div class="line">            &lt;div class=&quot;col-sub&quot;&gt;我是左边&lt;/div&gt;</div><div class="line">            &lt;div class=&quot;col-extra&quot;&gt;我是右边&lt;/div&gt;</div><div class="line">        &lt;/div&gt;</div><div class="line">    &lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure></p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/02/04/圣杯布局详解（翻译）/" class="archive-article-date">
  	<time datetime="2017-02-04T14:41:00.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-02-04</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/css/">css</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/学习/">学习</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/布局/">布局</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>












  
    <article id="post-JavaScript对象深度遍历实践" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/09/JavaScript对象深度遍历实践/">JavaScript对象深度遍历实践</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="需求场景"><a href="#需求场景" class="headerlink" title="需求场景"></a>需求场景</h1><p>在JavaScript中经常对象(数组)进行遍历并操作。如何对对象或者数组进行深度遍历操作。例如对以下数据结构进行过滤，属性中含有id, 且id值不在所给定的数组中的都需要被过滤掉。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">var obj = &#123;</div><div class="line">        id:10, </div><div class="line">        list:[</div><div class="line">            &#123;</div><div class="line">                id:1,</div><div class="line">                list:[</div><div class="line">                    &#123;</div><div class="line">                        id:2,</div><div class="line">                        list:[</div><div class="line">                            &#123;</div><div class="line">                                id:3,</div><div class="line">                                list:[</div><div class="line">                                    &#123;</div><div class="line">                                        id:4</div><div class="line">                                    &#125;</div><div class="line">                                ]</div><div class="line">                            &#125;</div><div class="line">                        ]</div><div class="line">                    &#125;</div><div class="line">                ]</div><div class="line">            &#125;,</div><div class="line">            &#123;</div><div class="line">                id:21,</div><div class="line">                list:[</div><div class="line">                    &#123;</div><div class="line">                        id:22,</div><div class="line">                        list:[</div><div class="line">                            &#123;</div><div class="line">                                id:23,</div><div class="line">                                list:[</div><div class="line">                                    &#123;</div><div class="line">                                        id:24</div><div class="line">                                    &#125;</div><div class="line">                                ]</div><div class="line">                            &#125;</div><div class="line">                        ]</div><div class="line">                    &#125;</div><div class="line">                ]</div><div class="line">            &#125;</div><div class="line">        ]</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    var activeArray = [10, 1, 2, 21, 22];</div></pre></td></tr></table></figure>
<p>需要根据activeArray中的数据对obj进行过滤，所有对象属性不在数组中的都要被去掉。</p>
<h1 id="方法一-JSON-stringify-和-JSON-parse"><a href="#方法一-JSON-stringify-和-JSON-parse" class="headerlink" title="方法一 JSON.stringify 和 JSON.parse"></a>方法一 JSON.stringify 和 JSON.parse</h1><p>我们先是有一个对象，可以对这个对象进行stringify操作，并传入操作函数作为第二个参数，对数据进行过滤。然后将过滤后的参数psrse得到新的对象。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">//过滤操作函数</div><div class="line">function resolve(key,value)&#123;</div><div class="line">    if( Object.prototype.toString.call(value) === &apos;[object Object]&apos;)&#123;</div><div class="line">        if( $.inArray(value.id, activeArray) &gt; -1 )&#123;</div><div class="line">            return value;</div><div class="line">        &#125;else&#123;</div><div class="line">            return undefined;</div><div class="line">        &#125;</div><div class="line">    &#125;else&#123;</div><div class="line">        return value;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>//方法一<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">    var str = JSON.stringify(obj, resolve, 4);</div><div class="line">    console.log(str);</div><div class="line">/**</div><div class="line">&#123;</div><div class="line">    &quot;id&quot;: 10,</div><div class="line">    &quot;list&quot;: [</div><div class="line">        &#123;</div><div class="line">            &quot;id&quot;: 1,</div><div class="line">            &quot;list&quot;: [</div><div class="line">                &#123;</div><div class="line">                    &quot;id&quot;: 2,</div><div class="line">                    &quot;list&quot;: [</div><div class="line">                        null</div><div class="line">                    ]</div><div class="line">                &#125;</div><div class="line">            ]</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            &quot;id&quot;: 21,</div><div class="line">            &quot;list&quot;: [</div><div class="line">                &#123;</div><div class="line">                    &quot;id&quot;: 22,</div><div class="line">                    &quot;list&quot;: [</div><div class="line">                        null</div><div class="line">                    ]</div><div class="line">                &#125;</div><div class="line">            ]</div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line">&#125;</div><div class="line">**/</div><div class="line">    console.log(JSON.parse(str));//得到object过滤后的object对象。</div></pre></td></tr></table></figure></p>
<p><img src="leanote://file/getImage?fileId=58b0154fab644107b2000e13" alt=""><br>但是仔细看数组的处理就有问题了，数组有长度但没有元素，我们拿到的数据是有问题的数据。</p>
<h1 id="方法二-自定义递归函数"><a href="#方法二-自定义递归函数" class="headerlink" title="方法二 自定义递归函数"></a>方法二 自定义递归函数</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div></pre></td><td class="code"><pre><div class="line">// 方法二</div><div class="line">function ObjectEachDeep(object, reviver) &#123;</div><div class="line">            function walk(holder, key) &#123;</div><div class="line">                var k;</div><div class="line">                var v;</div><div class="line">                var value = holder[key];</div><div class="line">                //对数组和对象进行遍历</div><div class="line">                //对象</div><div class="line">                if (value &amp;&amp; Object.prototype.toString.call(value) === &apos;[object Object]&apos;) &#123;</div><div class="line">                    for (k in value) &#123;</div><div class="line">                        if (Object.prototype.hasOwnProperty.call(value, k)) &#123;</div><div class="line">                            //递归调用</div><div class="line">                            v = walk(value, k);</div><div class="line">                            if (v !== undefined) &#123;</div><div class="line">                                //写回值</div><div class="line">                                value[k] = v;</div><div class="line">                            &#125; else &#123;</div><div class="line">                                //对象删除</div><div class="line">                                delete value[k];</div><div class="line">                            &#125;</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                //数组</div><div class="line">                &#125;else if(Object.prototype.toString.call(value) === &apos;[object Array]&apos;)&#123;</div><div class="line">                    for (k in value) &#123;</div><div class="line">                        if (Object.prototype.hasOwnProperty.call(value, k)) &#123;</div><div class="line">                            //递归调用</div><div class="line">                            v = walk(value, k);</div><div class="line">                            if (v !== undefined) &#123;</div><div class="line">                                //写回值</div><div class="line">                                value[k] = v;</div><div class="line">                            &#125; else &#123;</div><div class="line">                                //数组删除</div><div class="line">                                value.splice(k);</div><div class="line">                            &#125;</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                return reviver.call(holder, key, value);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            return (typeof reviver === &quot;function&quot;)</div><div class="line">                ? walk(&#123;&quot;&quot;: object&#125;, &quot;&quot;)</div><div class="line">                : object;</div><div class="line">        &#125;;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    var  result = ObjectEachDeep(obj, resolve);</div><div class="line"></div><div class="line">    console.log(JSON.stringify(result, null, 4));</div><div class="line">/**</div><div class="line">&#123;</div><div class="line">    &quot;id&quot;: 10,</div><div class="line">    &quot;list&quot;: [</div><div class="line">        &#123;</div><div class="line">            &quot;id&quot;: 1,</div><div class="line">            &quot;list&quot;: [</div><div class="line">                &#123;</div><div class="line">                    &quot;id&quot;: 2,</div><div class="line">                    &quot;list&quot;: []</div><div class="line">                &#125;</div><div class="line">            ]</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            &quot;id&quot;: 21,</div><div class="line">            &quot;list&quot;: [</div><div class="line">                &#123;</div><div class="line">                    &quot;id&quot;: 22,</div><div class="line">                    &quot;list&quot;: []</div><div class="line">                &#125;</div><div class="line">            ]</div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line">&#125;</div><div class="line">**/</div><div class="line">    console.log(result);</div><div class="line">![](leanote://file/getImage?fileId=58b01651ab644107b2000e21)</div></pre></td></tr></table></figure>
<p>//函数结构优化<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">//优化后</div><div class="line">function ObjectEachDeep(object, reviver) &#123;</div><div class="line">           function walk(holder, key) &#123;</div><div class="line">               var k;</div><div class="line">               var v;</div><div class="line">               var value = holder[key];</div><div class="line">               if (value &amp;&amp; typeof value == &quot;object&quot;) &#123;</div><div class="line">                   for (k in value) &#123;</div><div class="line">                       if (Object.prototype.hasOwnProperty.call(value, k)) &#123;</div><div class="line">                           v = walk(value, k);</div><div class="line">                           if (v !== undefined) &#123;</div><div class="line">                               value[k] = v;</div><div class="line">                           &#125; else &#123;</div><div class="line">                               if(Object.prototype.toString.call(value) === &apos;[object Object]&apos;)&#123;</div><div class="line">                                   delete value[k];</div><div class="line">                               &#125;else if(Object.prototype.toString.call(value) === &apos;[object Array]&apos;)&#123;</div><div class="line">                                   value.splice(k);</div><div class="line">                               &#125;</div><div class="line">                           &#125;</div><div class="line">                       &#125;</div><div class="line">                   &#125;</div><div class="line">               &#125;</div><div class="line">               return reviver.call(holder, key, value);</div><div class="line">           &#125;</div><div class="line"></div><div class="line">           return (typeof reviver === &quot;function&quot;)</div><div class="line">               ? walk(&#123;&quot;&quot;: object&#125;, &quot;&quot;)</div><div class="line">               : object;</div><div class="line">       &#125;;</div></pre></td></tr></table></figure></p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/01/09/JavaScript对象深度遍历实践/" class="archive-article-date">
  	<time datetime="2017-01-09T14:41:00.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-01-09</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/学习/">学习</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>












  
    <article id="post-SurviveJs-Webpack中文翻译文档-15去除未生效的CSS-md" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/13/SurviveJs-Webpack中文翻译文档-15去除未生效的CSS-md/">SurviveJs-Webpack中文翻译文档-15去除未生效的CSS.md</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Eliminating-Unused-CSS"><a href="#Eliminating-Unused-CSS" class="headerlink" title="Eliminating Unused CSS"></a>Eliminating Unused CSS</h1><p>像Bootstrap这样的框架有很多的CSS。通常情况下你仅仅用到了其中的一部分，但却将其全部打包了，包括很多没有用到的CSS。我们可以去掉哪些我们没有用到的CSS。一个叫做 purifycss 的工具就可以很好的通过分析代码来帮助我们实现这个目的。</p>
<h2 id="使用Purufycss"><a href="#使用Purufycss" class="headerlink" title="使用Purufycss"></a>使用Purufycss</h2><p>使用purifycss可以实现很大程度的精简。在实际中，有时甚至可以将Bootstrap从140kB减少40%到35kB。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm i purefycss-webpack-plugin --save-dev</div></pre></td></tr></table></figure>
<p>为了让我们的项目看起来更真实，我们将安装一个叫做Pure.css的库，并且在项目中使用它，以便我们可以看到purifycss的效果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm i purrecss --save</div></pre></td></tr></table></figure></p>
<p>配置文件中进行设置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line"></div><div class="line">const PATHS = &#123;</div><div class="line">  app: path.join(__dirname, &apos;app&apos;),</div><div class="line">leanpub-start-insert</div><div class="line">  style: [</div><div class="line">    path.join(__dirname, &apos;node_modules&apos;, &apos;purecss&apos;),</div><div class="line">    path.join(__dirname, &apos;app&apos;, &apos;main.css&apos;)</div><div class="line">  ],</div><div class="line">leanpub-end-insert</div><div class="line">leanpub-start-delete</div><div class="line">  style: path.join(__dirname, &apos;app&apos;, &apos;main.css&apos;),</div><div class="line">leanpub-end-delete</div><div class="line">  build: path.join(__dirname, &apos;build&apos;)</div><div class="line">&#125;;</div><div class="line"></div><div class="line">...</div></pre></td></tr></table></figure></p>
<p>由于我们路径的设置，我们并不需要太多的调整代码。现在当你执行<code>npm run build</code>，你将看到：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">[webpack-validator] Config is valid.</div><div class="line">clean-webpack-plugin: .../webpack-demo/build has been removed.</div><div class="line">Hash: adc32c7f82a388002a6e</div><div class="line">Version: webpack 1.13.0</div><div class="line">Time: 3656ms</div><div class="line">                               Asset       Size  Chunks             Chunk Names</div><div class="line">     app.a51c1a5cde933b81dc3e.js.map    1.57 kB    0, 3  [emitted]  app</div><div class="line">         app.a51c1a5cde933b81dc3e.js  252 bytes    0, 3  [emitted]  app</div><div class="line">      vendor.6947db44af2e47a304eb.js    21.4 kB    2, 3  [emitted]  vendor</div><div class="line">    manifest.86e8bb3f3a596746a1a6.js  846 bytes       3  [emitted]  manifest</div><div class="line">      style.e6624bc802ded7753823.css    16.7 kB    1, 3  [emitted]  style</div><div class="line">       style.e6624bc802ded7753823.js  156 bytes    1, 3  [emitted]  style</div><div class="line">   style.e6624bc802ded7753823.js.map  834 bytes    1, 3  [emitted]  style</div><div class="line">  style.e6624bc802ded7753823.css.map  107 bytes    1, 3  [emitted]  style</div><div class="line">  vendor.6947db44af2e47a304eb.js.map     274 kB    2, 3  [emitted]  vendor</div><div class="line">manifest.86e8bb3f3a596746a1a6.js.map    8.86 kB       3  [emitted]  manifest</div><div class="line">                          index.html  402 bytes          [emitted]</div><div class="line">   [0] ./app/index.js 100 bytes &#123;0&#125; [built]</div><div class="line">   [0] multi vendor 28 bytes &#123;2&#125; [built]</div><div class="line">   [0] multi style 40 bytes &#123;1&#125; [built]</div><div class="line">  [32] ./app/component.js 136 bytes &#123;0&#125; [built]</div><div class="line">    + 37 hidden modules</div><div class="line">Child html-webpack-plugin for &quot;index.html&quot;:</div><div class="line">        + 3 hidden modules</div><div class="line">Child extract-text-webpack-plugin:</div><div class="line">        + 2 hidden modules</div><div class="line">Child extract-text-webpack-plugin:</div><div class="line">        + 2 hidden modules</div></pre></td></tr></table></figure></p>
<p>我们发现，style.<strong><strong><strong>*</strong></strong></strong>.css文件因为引入了新的库变大了，同时hash数也发生了更改。</p>
<p>为了让purifycss有更好的效果，但却不去掉整个pure.css库，我们需要在代码中使用pure.css，所以给component组件增加一个<em>className</em>:<br><strong>app/component.js</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">module.exports = function () &#123;</div><div class="line">  var element = document.createElement(&apos;h1&apos;);</div><div class="line"></div><div class="line">leanpub-start-insert</div><div class="line">  element.className = &apos;pure-button&apos;;</div><div class="line">leanpub-end-insert</div><div class="line">  element.innerHTML = &apos;Hello world&apos;;</div><div class="line"></div><div class="line">  return element;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>现在启动项目<em>npm start</em>，之前的<em>hello world</em>就变成了一个按钮的样式。</p>
<p>我们现在需要对配置文件进行修改，使purifycss生效。先对<em>parts.js</em>进行扩展：<br><strong>libs/arts.js</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">const webpack = require(&apos;webpack&apos;);</div><div class="line">const CleanWebpackPlugin = require(&apos;clean-webpack-plugin&apos;);</div><div class="line">const ExtractTextPlugin = require(&apos;extract-text-webpack-plugin&apos;);</div><div class="line">leanpub-start-insert</div><div class="line">const PurifyCSSPlugin = require(&apos;purifycss-webpack-plugin&apos;);</div><div class="line">leanpub-end-insert</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line">leanpub-start-insert</div><div class="line">exports.purifyCSS = function(paths) &#123;</div><div class="line">  return &#123;</div><div class="line">    plugins: [</div><div class="line">      new PurifyCSSPlugin(&#123;</div><div class="line">        basePath: process.cwd(),</div><div class="line">        // `paths` is used to point PurifyCSS to files not</div><div class="line">        // visible to Webpack. You can pass glob patterns</div><div class="line">        // to it.</div><div class="line">        paths: paths</div><div class="line">      &#125;),</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">leanpub-end-insert</div></pre></td></tr></table></figure></p>
<p>然后在祝配置文件中引入这个配置函数。需要注意的是，这个插件需要放在<em>ExtractTextPlugin</em>，否则将不会生效：<br><strong>webpack.config.js</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line"></div><div class="line">// Detect how npm is run and branch based on that</div><div class="line">switch(process.env.npm_lifecycle_event) &#123;</div><div class="line">  case &apos;build&apos;:</div><div class="line">    config = merge(</div><div class="line">      ...</div><div class="line">      parts.minify(),</div><div class="line">leanpub-start-insert</div><div class="line">      parts.extractCSS(PATHS.style),</div><div class="line">      parts.purifyCSS([PATHS.app])</div><div class="line">leanpub-end-insert</div><div class="line">leanpub-start-delete</div><div class="line">      parts.extractCSS(PATHS.style)</div><div class="line">leanpub-end-delete</div><div class="line">    );</div><div class="line">  default:</div><div class="line">    ...</div><div class="line"></div><div class="line">module.exports = validate(config);</div></pre></td></tr></table></figure></p>
<p>Webpack能读懂<em>PATHS.app</em>,</p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2016/10/13/SurviveJs-Webpack中文翻译文档-15去除未生效的CSS-md/" class="archive-article-date">
  	<time datetime="2016-10-13T08:40:11.000Z" itemprop="datePublished"><i class="icon-clock"></i>2016-10-13</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SurviveJs/">SurviveJs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Webpack/">Webpack</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/学习/">学习</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>












  
    <article id="post-SurviveJs-Webpack中文翻译文档-14CSS拆分-md" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/13/SurviveJs-Webpack中文翻译文档-14CSS拆分-md/">SurviveJs-Webpack中文翻译文档-14CSS拆分.md</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Separating-CSS"><a href="#Separating-CSS" class="headerlink" title="Separating CSS"></a>Separating CSS</h1><p>现在我们个开发构建看起来已经很不错了，但是，我们的CSS文件都到哪里去了？根据我们的配置，CSS都被内联到JavaScript文件中了！尽管在开发时，这并没有什么问题，但是这看起来并不是个好事儿。当前的方案并不能使我们缓存CSS。在一些情况下，我们可能会遭遇Flash of Unstyled Content (FOUC)。</p>
<p>碰巧的是Webpack给我们提供了生成CSS包的方法。我们可以使用<strong><em><a href="https://www.npmjs.com/package/extract-text-webpack-plugin" target="_blank" rel="external">ExtractTextPlugin</a></em></strong>来实现CSS包分离。它将在编译之前进行处理，并且不支持热加载。但我们仅在生产环境中使用，也没什么影响。</p>
<blockquote>
<p>该技术还可以用来处理其它资源，如模版文件。</p>
<p>使用内联在JavaScript代码中的CSS样式比较危险，就相当于矢量攻击。赞成使用ExtractTextPlugin或者类似的解决方案。</p>
</blockquote>
<h2 id="使用extract-text-webpack-plugin"><a href="#使用extract-text-webpack-plugin" class="headerlink" title="使用extract-text-webpack-plugin"></a>使用<strong><em>extract-text-webpack-plugin</em></strong></h2><p>先安装依赖：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm i extract-text-webpack-plugin --save-dev</div></pre></td></tr></table></figure></p>
<p>该插件分两部分运转。首先又一个loader,<code>ExtractTextPlugin.extract</code>，标记要被取出来的文件。该插件将在此基础上进行标注工作。例如：<br><strong>libs/parts.js</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">const webpack = require(&apos;webpack&apos;);</div><div class="line">const CleanWebpackPlugin = require(&apos;clean-webpack-plugin&apos;);</div><div class="line">leanpub-start-insert</div><div class="line">const ExtractTextPlugin = require(&apos;extract-text-webpack-plugin&apos;);</div><div class="line">leanpub-end-insert</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line">leanpub-start-insert</div><div class="line">exports.extractCSS = function(paths) &#123;</div><div class="line">  return &#123;</div><div class="line">    module: &#123;</div><div class="line">      loaders: [</div><div class="line">        // Extract CSS during build</div><div class="line">        &#123;</div><div class="line">          test: /\.css$/,</div><div class="line">          loader: ExtractTextPlugin.extract(&apos;style&apos;, &apos;css&apos;),</div><div class="line">          include: paths</div><div class="line">        &#125;</div><div class="line">      ]</div><div class="line">    &#125;,</div><div class="line">    plugins: [</div><div class="line">      // Output extracted CSS to a file</div><div class="line">      new ExtractTextPlugin(&apos;[name].[chunkhash].css&apos;)</div><div class="line">    ]</div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line">leanpub-end-insert</div></pre></td></tr></table></figure></p>
<p>主配置文件修改：<br><strong>webpack.config.js</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line"></div><div class="line">// Detect how npm is run and branch based on that</div><div class="line">switch(process.env.npm_lifecycle_event) &#123;</div><div class="line">  case &apos;build&apos;:</div><div class="line">    config = merge(</div><div class="line">      ...</div><div class="line">      parts.minify(),</div><div class="line">leanpub-start-insert</div><div class="line">      parts.extractCSS(PATHS.app)</div><div class="line">leanpub-end-insert</div><div class="line">leanpub-start-delete</div><div class="line">      parts.setupCSS(PATHS.app)</div><div class="line">leanpub-end-delete</div><div class="line">    );</div><div class="line">    break;</div><div class="line">  default:</div><div class="line">    config = merge(</div><div class="line">      ...</div><div class="line">    );</div><div class="line">&#125;</div><div class="line"></div><div class="line">module.exports = validate(config);</div></pre></td></tr></table></figure></p>
<p>这样处理后，在开发时，我们仍可以使用热加载。在生产打包中，我们声称了一个单独的CSS文件，而且，<em>html-webpack-plugin</em>将自动将该文件注入到<code>index.html</code>中。</p>
<blockquote>
<p>在定义时，使用<code>loaders: [ExtractTextPlugin.extract(&#39;style&#39;, &#39;css&#39;)]</code>不起效，而起会造成错误！所以当使用<code>ExtractTextPlugin</code>时，使用<code>loader</code>语法来代替。</p>
<p>如果希望<code>ExtractTextPlugin</code>加载更多loader,可以使用<code>!</code>，例如：<code>ExtractTextPlugin.extract(&#39;style&#39;, &#39;css!postcss&#39;)</code>。</p>
</blockquote>
<p>现在运行 <code>npm run build</code>,将看到如下信息：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">&gt; Webpack@1.0.0 build /Users/bing/Documents/workspase/Webpack/SurvivejsWebpack/webpack09-SeparatingCSS</div><div class="line">&gt; webpack</div><div class="line"></div><div class="line">clean-webpack-plugin: /Users/bing/Documents/workspase/Webpack/SurvivejsWebpack/webpack09-SeparatingCSS/build has been removed.</div><div class="line">Hash: 10c04a03298eb4f6acb9</div><div class="line">Version: webpack 1.13.2</div><div class="line">Time: 1524ms</div><div class="line">                               Asset       Size  Chunks             Chunk Names</div><div class="line">         app.ce544f41fa6ccea5a5e3.js  351 bytes    0, 2  [emitted]  app</div><div class="line">      vendor.cebe3e051882068470ee.js    23.2 kB    1, 2  [emitted]  vendor</div><div class="line">    manifest.58bdd677e3a42e68846a.js  949 bytes       2  [emitted]  manifest</div><div class="line">        app.ce544f41fa6ccea5a5e3.css   97 bytes    0, 2  [emitted]  app</div><div class="line">     app.ce544f41fa6ccea5a5e3.js.map    2.34 kB    0, 2  [emitted]  app</div><div class="line">    app.ce544f41fa6ccea5a5e3.css.map  105 bytes    0, 2  [emitted]  app</div><div class="line">  vendor.cebe3e051882068470ee.js.map     262 kB    1, 2  [emitted]  vendor</div><div class="line">manifest.58bdd677e3a42e68846a.js.map     8.6 kB       2  [emitted]  manifest</div><div class="line">                          index.html  416 bytes          [emitted]</div><div class="line">   [0] ./app/index.js 123 bytes &#123;0&#125; [built]</div><div class="line">   [0] multi vendor 28 bytes &#123;1&#125; [built]</div><div class="line">   [1] ./app/component.js 218 bytes &#123;0&#125; [built]</div><div class="line">    + 33 hidden modules</div><div class="line">Child html-webpack-plugin for &quot;index.html&quot;:</div><div class="line">        + 3 hidden modules</div><div class="line">Child extract-text-webpack-plugin:</div><div class="line">        + 2 hidden modules</div></pre></td></tr></table></figure></p>
<blockquote>
<p>如果发生了<em><code>Module build failed: CssSyntaxError:</code></em>请确认<code>common</code>配置项中没有包含有关css的设置。</p>
</blockquote>
<p>现在我们将css文件单独打包到一个文件中。这也使的我们的JavaScript包文件变得很小。我们同样避免了FOUC的问题，以为浏览器不用等待JavaScript加载完了再从中获取样式信息。同时，它可以单独处理css文件因而避免了样式闪烁的问题。</p>
<blockquote>
<p>如果你的项目很复杂，有很多依赖，使用<code>DedupePlugin</code>是一个很好的选择。它可以找到重复的文件然后删除重复的数据。使用<code>new webpack.optimize.DedupePlugin()</code>可以定义开启它。请记住在生产环境中使用。</p>
</blockquote>
<h2 id="拆分应用的JavaScript代码和CSS代码"><a href="#拆分应用的JavaScript代码和CSS代码" class="headerlink" title="拆分应用的JavaScript代码和CSS代码"></a>拆分应用的JavaScript代码和CSS代码</h2><p>一个符合逻辑的处理方式是将应用的JavaScript代码和样式代码用不同的入口文件来拆分。这样将去掉它们之间的依赖而且可以解决缓存问题。为了实现这个想法我们需要将样式从当前的模块中拆分出来让，然后在配置中为它新增一个自定义的模块：<br><strong>app/index.js</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">require(&apos;react&apos;);</div><div class="line"></div><div class="line">leanpub-start-delete</div><div class="line">require(&apos;./main.css&apos;);</div><div class="line">leanpub-end-delete</div><div class="line"></div><div class="line">...</div></pre></td></tr></table></figure></p>
<p>删除了样式的引入语句，我们需要定义一个新的入口<br><strong>webpack.config.js</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line"></div><div class="line">const PATHS = &#123;</div><div class="line">  app: path.join(__dirname, &apos;app&apos;),</div><div class="line">leanpub-start-insert</div><div class="line">  style: path.join(__dirname, &apos;app&apos;, &apos;main.css&apos;),</div><div class="line">leanpub-end-insert</div><div class="line">  build: path.join(__dirname, &apos;build&apos;)</div><div class="line">&#125;;</div><div class="line"></div><div class="line">const common = &#123;</div><div class="line">  // Entry accepts a path or an object of entries.</div><div class="line">  // We&apos;ll be using the latter form given it&apos;s</div><div class="line">  // convenient with more complex configurations.</div><div class="line">  entry: &#123;</div><div class="line">leanpub-start-insert</div><div class="line">    style: PATHS.style,</div><div class="line">leanpub-end-insert</div><div class="line">    app: PATHS.app</div><div class="line">  &#125;,</div><div class="line">  ...</div><div class="line">&#125;;</div><div class="line"></div><div class="line">// Detect how npm is run and branch based on that</div><div class="line">switch(process.env.npm_lifecycle_event) &#123;</div><div class="line">  case &apos;build&apos;:</div><div class="line">    config = merge(</div><div class="line">      ...</div><div class="line">      parts.minify(),</div><div class="line">leanpub-start-insert</div><div class="line">      parts.extractCSS(PATHS.style)</div><div class="line">leanpub-end-insert</div><div class="line">leanpub-start-delete</div><div class="line">      parts.extractCSS(PATHS.app)</div><div class="line">leanpub-end-delete</div><div class="line">    );</div><div class="line">    break;</div><div class="line">  default:</div><div class="line">    config = merge(</div><div class="line">      ...</div><div class="line">leanpub-start-insert</div><div class="line">      parts.setupCSS(PATHS.style),</div><div class="line">leanpub-end-insert</div><div class="line">leanpub-start-delete</div><div class="line">      parts.setupCSS(PATHS.app),</div><div class="line">leanpub-end-delete</div><div class="line">      parts.devServer(&#123;</div><div class="line">        // Customize host/port here if needed</div><div class="line">        host: process.env.HOST,</div><div class="line">        port: process.env.PORT</div><div class="line">      &#125;)</div><div class="line">    );</div><div class="line">&#125;</div><div class="line"></div><div class="line">module.exports = validate(config);</div></pre></td></tr></table></figure></p>
<p>现在执行<code>npm run build</code>,你将会看到：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">&gt; Webpack@1.0.0 build /Users/bing/Documents/workspase/Webpack/SurvivejsWebpack/webpack09-SeparatingCSS</div><div class="line">&gt; webpack</div><div class="line"></div><div class="line">clean-webpack-plugin: /Users/bing/Documents/workspase/Webpack/SurvivejsWebpack/webpack09-SeparatingCSS/build has been removed.</div><div class="line">Hash: 3f01505a5156fb3c17b3</div><div class="line">Version: webpack 1.13.2</div><div class="line">Time: 1520ms</div><div class="line">                               Asset       Size  Chunks             Chunk Names</div><div class="line">     app.79ad79eb1d8f9fd9f3a2.js.map    1.55 kB    0, 3  [emitted]  app</div><div class="line">         app.79ad79eb1d8f9fd9f3a2.js  246 bytes    0, 3  [emitted]  app</div><div class="line">      vendor.cc2ddbcffa7968ff3274.js    23.1 kB    2, 3  [emitted]  vendor</div><div class="line">    manifest.927dc801a1b2cec0a16f.js  949 bytes       3  [emitted]  manifest</div><div class="line">      style.849465d87dececcd5592.css   85 bytes    1, 3  [emitted]  style</div><div class="line">       style.849465d87dececcd5592.js   93 bytes    1, 3  [emitted]  style</div><div class="line">   style.849465d87dececcd5592.js.map  430 bytes    1, 3  [emitted]  style</div><div class="line">  style.849465d87dececcd5592.css.map  107 bytes    1, 3  [emitted]  style</div><div class="line">  vendor.cc2ddbcffa7968ff3274.js.map     262 kB    2, 3  [emitted]  vendor</div><div class="line">manifest.927dc801a1b2cec0a16f.js.map     8.6 kB       3  [emitted]  manifest</div><div class="line">                          index.html  494 bytes          [emitted]</div><div class="line">   [0] ./app/index.js 100 bytes &#123;0&#125; [built]</div><div class="line">   [0] multi vendor 28 bytes &#123;2&#125; [built]</div><div class="line">   [1] ./app/component.js 141 bytes &#123;0&#125; [built]</div><div class="line">    + 33 hidden modules</div><div class="line">Child html-webpack-plugin for &quot;index.html&quot;:</div><div class="line">        + 3 hidden modules</div><div class="line">Child extract-text-webpack-plugin:</div><div class="line">        + 2 hidden modules</div></pre></td></tr></table></figure></p>
<p>这样，我们就可以单独管理从JavaScript中拆出来的样式了。现在更改样式文件就不会影响JavaScript代码的hash值了。但是这种处理方式会造成一个问题。</p>
<p>如果你瞧仔细了，你会在输出目录中看到一个叫做<code>style.e5eae09a78b3efd50e73.js</code>的文件。你的这个文件可能hash值不一样，因为它是由Webpack生成的，而它的内容如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">webpackJsonp([1,3],[function(n,c)&#123;&#125;]);</div></pre></td></tr></table></figure></p>
<p>从技术上来讲这是多余的。通过<em>HtmlWebpackPlugin</em>的检查来排除这个文件将是安全的。但是对于我们当前的项目来说却非常好。理想状态下Webpack不应该生成这个文件，详细的可以参考这个与之<em><a href="https://github.com/webpack/webpack/issues/1967" target="_blank" rel="external">相关的问题</a></em></p>
<blockquote>
<p>将来，我们将通过<code>[contenthash]</code>占位符。他将会通过文件的内容来生成hash值。</p>
</blockquote>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2016/10/13/SurviveJs-Webpack中文翻译文档-14CSS拆分-md/" class="archive-article-date">
  	<time datetime="2016-10-13T08:39:59.000Z" itemprop="datePublished"><i class="icon-clock"></i>2016-10-13</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SurviveJs/">SurviveJs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Webpack/">Webpack</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/学习/">学习</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>












  
    <article id="post-SurviveJs-Webpack中文翻译文档-13包清理-md" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/13/SurviveJs-Webpack中文翻译文档-13包清理-md/">SurviveJs-Webpack中文翻译文档-13包清理.md</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Cleaning-the-Build"><a href="#Cleaning-the-Build" class="headerlink" title="Cleaning the Build"></a>Cleaning the Build</h1><p>当前我们的应用不能在重新大包时删掉<code>build</code>目录下老的文件。我们将增加一个插件来清除build目录。</p>
<p>另外一个比较好的方法就是在启动webpack的时候，执行<code>rm -rf ./build &amp;&amp; webpack</code>。</p>
<h2 id="使用clean-webpack-plugin"><a href="#使用clean-webpack-plugin" class="headerlink" title="使用clean-webpack-plugin"></a>使用clean-webpack-plugin</h2><p>首先要安装<strong><em><a href="https://www.npmjs.com/package/clean-webpack-plugin" target="_blank" rel="external">clean-webpack-plugin</a></em></strong>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm i clean-webpack-plugin --save-dev</div></pre></td></tr></table></figure></p>
<p>接下来，我们用一个函数来实现上面的想法。虽然可以直接使用这个插件，但是，为了跨项目使用，我们仍将其添加到我们的libs中。<br><strong>libs.parts.js</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">const webpack = require(&apos;webpack&apos;);</div><div class="line">leanpub-start-insert</div><div class="line">const CleanWebpackPlugin = require(&apos;clean-webpack-plugin&apos;);</div><div class="line">leanpub-end-insert</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line">leanpub-start-insert</div><div class="line">exports.clean = function(path) &#123;</div><div class="line">  return &#123;</div><div class="line">    plugins: [</div><div class="line">      new CleanWebpackPlugin([path], &#123;</div><div class="line">        // Without `root` CleanWebpackPlugin won&apos;t point to our</div><div class="line">        // project and will fail to work.</div><div class="line">        root: process.cwd()</div><div class="line">      &#125;)</div><div class="line">    ]</div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line">leanpub-end-insert</div></pre></td></tr></table></figure></p>
<p>在主配置文件中引入：<br><strong>webpack.config.js</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line"></div><div class="line">// Detect how npm is run and branch based on that</div><div class="line">switch(process.env.npm_lifecycle_event) &#123;</div><div class="line">  case &apos;build&apos;:</div><div class="line">    config = merge(</div><div class="line">      common,</div><div class="line">      &#123;</div><div class="line">        devtool: &apos;source-map&apos;,</div><div class="line">        output: &#123;</div><div class="line">          path: PATHS.build,</div><div class="line">          filename: &apos;[name].[chunkhash].js&apos;,</div><div class="line">          // This is used for require.ensure. The setup</div><div class="line">          // will work without but this is useful to set.</div><div class="line">          chunkFilename: &apos;[chunkhash].js&apos;</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">leanpub-start-insert</div><div class="line">      parts.clean(PATHS.build),</div><div class="line">leanpub-end-insert</div><div class="line">      ...</div><div class="line">    );</div><div class="line">    break;</div><div class="line">  default:</div><div class="line">    ...</div><div class="line">&#125;</div><div class="line"></div><div class="line">module.exports = validate(config);</div></pre></td></tr></table></figure></p>
<p>如此更改后，<code>build</code>文件夹在打包后变得很干净。</p>
<blockquote>
<p>如果想在特定的时候保留旧版本的文件，可以使用<code>path.join(PATHS.build,&#39;*&#39;)</code>来替换`PATHS.build｀。</p>
</blockquote>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>我们的应用变得越来越好。还有一个主要的问题，我们的css文件还是内联在javascript文件中，这将是<strong>Flash of Unstyled Content (FOUC)</strong>的噩梦。不是我们的追求。</p>
<p>css中一个小小的改动就是是我们的应用失效。这在开发中也许没有坏处，但是在生产中问题就大了。我们需要同过将css拆分到其单独的包中来解决这个问题。</p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2016/10/13/SurviveJs-Webpack中文翻译文档-13包清理-md/" class="archive-article-date">
  	<time datetime="2016-10-13T08:39:52.000Z" itemprop="datePublished"><i class="icon-clock"></i>2016-10-13</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SurviveJs/">SurviveJs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Webpack/">Webpack</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/学习/">学习</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>












  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  


      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2018 Bing
    	</div>
      	<div class="https://bingblog.github.io" target="_blank">BingBlog</a>  Theme <a href="https://github.com/BingBlog" target="_blank">BingBlog</a> by Bing
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: "/",
		innerArchive: true
	}
</script>

<script src="/./main.js"></script>


    
<div class="tools-col">
  <ul class="btn-wrap">
    
      <li class="chose" data-hook="tools-section-all"><span class="text">全部</span><i class="icon-book"></i></li>
    
    
      <li data-hook="tools-section-tag"><span class="text">标签</span><i class="icon-price-tags"></i></li>
    
    
      <li data-hook="tools-section-friends"><span class="text">友链</span><i class="icon-link"></i></li>
    
    
      <li data-hook="tools-section-me"><span class="text">我</span><i class="icon-smile"></i></li>
    
  </ul>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all chose">
    	</section>
    

    
    	<section class="tools-section tools-section-tag">
    			<div class="widget tagcloud" id="js-tagcloud">
    				<a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/Sizzle/" style="font-size: 10px;">Sizzle</a> <a href="/tags/SurviveJs/" style="font-size: 17.5px;">SurviveJs</a> <a href="/tags/Webpack/" style="font-size: 17.5px;">Webpack</a> <a href="/tags/css/" style="font-size: 12.5px;">css</a> <a href="/tags/jQuery/" style="font-size: 12.5px;">jQuery</a> <a href="/tags/javascript/" style="font-size: 17.5px;">javascript</a> <a href="/tags/validate/" style="font-size: 10px;">validate</a> <a href="/tags/webFont/" style="font-size: 10px;">webFont</a> <a href="/tags/学习/" style="font-size: 20px;">学习</a> <a href="/tags/布局/" style="font-size: 12.5px;">布局</a> <a href="/tags/获取Dom元素/" style="font-size: 10px;">获取Dom元素</a>
    			</div>
    	</section>
    

    
    	<section class="tools-section tools-section-friends">
  		
  			<div class="friends-wrap" id="js-friends">
  			
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="https://github.com/BingBlog/SurvivejsWebpack#survivejswebpack">SurviveJs翻译源码</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="https://github.com/BingBlog/BingBlog">博客源码</a>
  	        
  	        </div>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">很惭愧&lt;br&gt;&lt;br&gt;只做了一点微小的工作&lt;br&gt;谢谢大家</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>